--- 
name: processing-nested-lists
layout: post
title: Processing nested lists
date: 2011-04-28 17:41:00 -05:00
categories: 
- R
---
So perhaps you have all figured this out already, but I was excited to figure out how to finally neatly get all the data frames, lists, vectors, etc. out of a nested list. It is as easy as nesting calls to the apply family of functions, in the case below, using plyr's apply like functions. Take this example:<br /><br /><br /><br /><div style="overflow: auto;"><div class="geshifilter"><pre class="r geshifilter-R"><span style="color: #666666; font-family: monospace; font-style: italic;"># Nested lists code, an example</span><br /><span style="color: #666666; font-family: monospace; font-style: italic;"># Make a nested list</span><br />mylist <span style="font-family: monospace;">&lt;-</span> <a href="http://inside-r.org/r-doc/base/list" style="font-family: monospace;"><span style="color: #003399; font-weight: bold;">list</span></a><span style="color: #009900; font-family: monospace;">(</span><span style="color: #009900; font-family: monospace;">)</span><br />mylist_ <span style="font-family: monospace;">&lt;-</span> <a href="http://inside-r.org/r-doc/base/list" style="font-family: monospace;"><span style="color: #003399; font-weight: bold;">list</span></a><span style="color: #009900; font-family: monospace;">(</span><span style="color: #009900; font-family: monospace;">)</span><br /><span style="color: black; font-family: monospace; font-weight: bold;">for</span><span style="color: #009900; font-family: monospace;">(</span>i <span style="color: black; font-family: monospace; font-weight: bold;">in</span> <span style="color: #cc66cc; font-family: monospace;">1</span><span style="font-family: monospace;">:</span><span style="color: #cc66cc; font-family: monospace;">5</span><span style="color: #009900; font-family: monospace;">)</span> <span style="color: #009900; font-family: monospace;">{</span><br /> <span style="color: black; font-family: monospace; font-weight: bold;">for</span><span style="color: #009900; font-family: monospace;">(</span>j <span style="color: black; font-family: monospace; font-weight: bold;">in</span> <span style="color: #cc66cc; font-family: monospace;">1</span><span style="font-family: monospace;">:</span><span style="color: #cc66cc; font-family: monospace;">5</span><span style="color: #009900; font-family: monospace;">)</span> <span style="color: #009900; font-family: monospace;">{</span><br />  mylist<span style="color: #009900; font-family: monospace;">[</span><span style="color: #009900; font-family: monospace;">[</span>j<span style="color: #009900; font-family: monospace;">]</span><span style="color: #009900; font-family: monospace;">]</span> <span style="font-family: monospace;">&lt;-</span> i<span style="font-family: monospace;">*</span>j<br /> <span style="color: #009900; font-family: monospace;">}</span><br />mylist_<span style="color: #009900; font-family: monospace;">[</span><span style="color: #009900; font-family: monospace;">[</span>i<span style="color: #009900; font-family: monospace;">]</span><span style="color: #009900; font-family: monospace;">]</span> <span style="font-family: monospace;">&lt;-</span> mylist<br /><span style="color: #009900; font-family: monospace;">}</span><br />&nbsp;<br /><span style="color: #666666; font-family: monospace; font-style: italic;"># return values from first part of list</span><br />laply<span style="color: #009900; font-family: monospace;">(</span>mylist_<span style="color: #009900; font-family: monospace;">[</span><span style="color: #009900; font-family: monospace;">[</span><span style="color: #cc66cc; font-family: monospace;">1</span><span style="color: #009900; font-family: monospace;">]</span><span style="color: #009900; font-family: monospace;">]</span><span style="color: #339933; font-family: monospace;">,</span> <a href="http://inside-r.org/r-doc/base/identity" style="font-family: monospace;"><span style="color: #003399; font-weight: bold;">identity</span></a><span style="color: #009900; font-family: monospace;">)</span><br />[1] 1 2 3 4 5</pre><pre class="r geshifilter-R">&nbsp;<br /><span style="color: #666666; font-family: monospace; font-style: italic;"># return all values</span><br />laply<span style="color: #009900; font-family: monospace;">(</span>mylist_<span style="color: #339933; font-family: monospace;">,</span> <a href="http://inside-r.org/r-doc/base/function" style="font-family: monospace;"><span style="color: #003399; font-weight: bold;">function</span></a><span style="color: #009900; font-family: monospace;">(</span>x<span style="color: #009900; font-family: monospace;">)</span> laply<span style="color: #009900; font-family: monospace;">(</span>x<span style="color: #339933; font-family: monospace;">,</span> <a href="http://inside-r.org/r-doc/base/identity" style="font-family: monospace;"><span style="color: #003399; font-weight: bold;">identity</span></a><span style="color: #009900; font-family: monospace;">)</span><span style="color: #009900; font-family: monospace;">)</span><br />     1  2  3  4  5<br />[1,] 1  2  3  4  5<br />[2,] 2  4  6  8 10<br />[3,] 3  6  9 12 15<br />[4,] 4  8 12 16 20<br />[5,] 5 10 15 20 25</pre><pre class="r geshifilter-R" style="font-family: monospace;">&nbsp;<br /><span style="color: #666666; font-style: italic;"># perform some function, in this case sqrt of each value</span><br />laply<span style="color: #009900;">(</span>mylist_<span style="color: #339933;">,</span> <a href="http://inside-r.org/r-doc/base/function"><span style="color: #003399; font-weight: bold;">function</span></a><span style="color: #009900;">(</span>x<span style="color: #009900;">)</span> laply<span style="color: #009900;">(</span>x<span style="color: #339933;">,</span> <a href="http://inside-r.org/r-doc/base/function"><span style="color: #003399; font-weight: bold;">function</span></a><span style="color: #009900;">(</span>x<span style="color: #009900;">)</span> <a href="http://inside-r.org/r-doc/base/sqrt"><span style="color: #003399; font-weight: bold;">sqrt</span></a><span style="color: #009900;">(</span>x<span style="color: #009900;">)</span><span style="color: #009900;">)</span><span style="color: #009900;">)</span></pre><pre class="r geshifilter-R"><span style="color: #009900;">  </span><br />        1        2        3        4        5<br />[1,] 1.000000 1.414214 1.732051 2.000000 2.236068<br />[2,] 1.414214 2.000000 2.449490 2.828427 3.162278<br />[3,] 1.732051 2.449490 3.000000 3.464102 3.872983<br />[4,] 2.000000 2.828427 3.464102 4.000000 4.472136<br />[5,] 2.236068 3.162278 3.872983 4.472136 5.000000<br /></pre></div></div><br /><br /><a href="http://www.inside-r.org/pretty-r" title="Created by Pretty R at inside-R.org">Created by Pretty R at inside-R.org</a>
