<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Ivan Hanigan - Disentangle Things</title>
    <meta name="author" content="Ivan Hanigan" />
    <link rel="stylesheet" type="text/css" href="/stylesheets/screen.css">
    <link href="http://feeds.feedburner.com/Disentanglethings" rel="alternate" title="RSS" type="application/rss+xml" />
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script type="text/javascript" src="/javascripts/jquery.github_v2.js"></script>
  </head>

  <body>


    <div id="header" class="section">
      <div class="wrapper">
        <strong id="blog-title">
          <a href="/" rel="home">Disentangle Things by Ivan Hanigan</a>
        </strong>
        <p id="blog-description"></p>
        <div id="navigation">
          <ul class="nav clearfix">
            <li class="first-child"><a href="/research.html">About My Notebook</a></li>
            <li> <a href="/blog.html">Entries</a></li> 

            <li><a href="/about.html">About Me</a></li>
            <li><a href="/publications.html">Journal Publications</a></li>
            <li><a href="/projects.html">Software</a></li>
            <li><a href="/projects.html">Data</a></li>
            <li><a href="/cv.html">My CV</a></li>
            <li><a href="http://lmgtfy.com/?q=site%3Aivanhanigan.github.io">Search this Site</a></li> 
            <!--<li><a href="/donors.html">Donors</a></li>-->
          </ul>
        </div>
      </div>
    </div>
    <div id="main" class="section">
      <div class="wrapper">
        <div id="content">
          <h2>Welcome to my Open Notebook</h2>

<p>This is an Open Notebook with <a href="http://onsclaims.wikispaces.com/">Selected Content - Delayed</a>. Find out more <a href="/research.html">Here</a>.</p>

<p>  <img src="/images/ONS-SCD.png" alt="ONS-SCD.png" /></p>

          <!-- AddThis Button BEGIN -->
<div class="addthis_toolbox addthis_default_style ">
  <a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
  <a class="addthis_button_tweet"></a>
  <a class="addthis_button_google_plusone" g:plusone:size="medium"></a>
  <a class="addthis_counter addthis_pill_style"></a>
</div>
<script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid=SChamberlain"></script>
<!-- AddThis Button END -->

  <div class="full">
    <h1 class="entry-title">
      <a href="/2014/01/tumbarumba-supersite-dem/" title="tumbarumba-supersite-dem" rel="bookmark">tumbarumba-supersite-dem</a>
    </h1>
    <div class="entry-content full-content">
      <ul>
<li>The first dataset I downloaded from ASN for playing around with was the Tumba Lidar.</li>
<li>I had thought it might be better to offer this as a OGC service rather than downloadable geotiff</li>
<li>just in terms of the size firstly (104MB)</li>
<li>but I also soon realised it would need some specialised tweaking which non-GIS users might struggle a bit and could avoid if the serverside data is set up by a GIS specialist (although can we assume only GIS specialists will download this kind of data)?</li>
<li>kudos to <a href="http://stackoverflow.com/questions/11966503/how-to-replace-nas-in-a-raster-object">http://stackoverflow.com/questions/11966503/how-to-replace-nas-in-a-raster-object</a></li>
</ul>


<h4>Code:tumbarumba-supersite-dem</h4>

<pre><code>setwd("~/data/supersite/tumba-lidar")
require(raster)
fname  &lt;- dir(pattern = "tif$")
fname
r  &lt;- raster(fname)
str(r)
dfr &lt;- as.data.frame(r)
summary(dfr)
# the -1 code looks like it might be missing?  They are around the edge.
rna &lt;- reclassify(r, cbind(-1, 1197))
png("tumba-lidar.png")
plot(rna, col=terrain.colors(100), xlab = "eastings (m)", ylab = "northings (m)")
title("Tumbarumba Supersite Digital Elevation Model")
title(sub = "packageId=lloyd.374.2")
dev.off()
</code></pre>

<p></p>


<p><img src="/images/tumba-lidar.png" alt="tumba-lidar.png" /></p>

<h4>Alternately use a geoserver</h4>

<ul>
<li>If we use a Geoserver we could set it up so people can view this without downloading the data</li>
<li>following the instructions <a href="http://suite.opengeo.org/opengeo-docs/processing/contour/setup.html">http://suite.opengeo.org/opengeo-docs/processing/contour/setup.html</a></li>
<li>using the ANU GIS library server</li>
</ul>


<iframe style="border: none;" height="400" width="600" src="http://brawn.anu.edu.au:8081/geoexplorer/viewer/#maps/1"></iframe>


<p>;</p>

<ul>
<li>PS the map might take a minute to show up, not sure why, might ask the sysadmin to look at the server performance</li>
</ul>


      <div class="clear"></div>
    </div>
    <p class="alt-font tight">
      Posted in&nbsp;
      
      <a href="/categories/research methods" title="research methods" rel="category tag">research methods</a>
      
    </p>
    <!--
	<p class="comments-link">
      <a href='/2014/01/tumbarumba-supersite-dem/#disqus_thread'>Comments</a>
    </p>
	-->
    <p class="by-line">
      <span class="date full-date">
        <abbr class="published" title="2014-01-03 00:00:00 +1100">03 Jan 2014</abbr>
      </span>
    </p>
    <div class="clear"></div>
  </div>
  <div class="rule"><hr/></div>

  <div class="full">
    <h1 class="entry-title">
      <a href="/2013/12/extend-Rs-data-frame-class-with-metadata/" title="extend-Rs-data-frame-class-with-metadata" rel="bookmark">extend-Rs-data-frame-class-with-metadata</a>
    </h1>
    <div class="entry-content full-content">
      <p>"reml now extends R's data.frame class by introducing the data.set class which includes additional metadata required by EML"
<a href="https://github.com/ropensci/reml">https://github.com/ropensci/reml</a></p>

<p>and
"I’d like to define a class that acts just like a data.frame, just like the data.table class does, but contains some additional metadata (e.g. the units associated with the columns) and has some additional methods associated with it (e.g. that might do something with those units) while also working with any function that simply knows how to handle data.frame objects.
How might this be done?"
<a href="http://carlboettiger.info/2013/09/11/extending-data-frame-class.html">http://carlboettiger.info/2013/09/11/extending-data-frame-class.html</a></p>

<p>Also this guys attempt was interesting (I like TraMineR too!)
<a href="http://ivanhanigan.github.io/2013/11/handling-survey-data-with-r/">http://ivanhanigan.github.io/2013/11/handling-survey-data-with-r/</a></p>

      <div class="clear"></div>
    </div>
    <p class="alt-font tight">
      Posted in&nbsp;
      
      <a href="/categories/research methods" title="research methods" rel="category tag">research methods</a>
      
    </p>
    <!--
	<p class="comments-link">
      <a href='/2013/12/extend-Rs-data-frame-class-with-metadata/#disqus_thread'>Comments</a>
    </p>
	-->
    <p class="by-line">
      <span class="date full-date">
        <abbr class="published" title="2013-12-24 00:00:00 +1100">24 Dec 2013</abbr>
      </span>
    </p>
    <div class="clear"></div>
  </div>
  <div class="rule"><hr/></div>

  <div class="full">
    <h1 class="entry-title">
      <a href="/2013/12/a-few-best-practices-for-statistical-programming/" title="a-few-best-practices-for-statistical-programming" rel="bookmark">a-few-best-practices-for-statistical-programming</a>
    </h1>
    <div class="entry-content full-content">
      <ul>
<li>John Myles White invented the ProjectTemplate R Package</li>
<li>This is a great application that helps streamline the process of creating a data analysis project</li>
<li>Recently John posted about some tips for <a href="http://www.johnmyleswhite.com/notebook/2013/01/24/writing-better-statistical-programs-in-r/">best practices for statistical programming</a></li>
</ul>


<h4>Best Practices for Statistical Programming</h4>

<ul>
<li>Write Out a Directed Acyclic Graph (DAG)</li>
<li>Vectorize Your Operations</li>
<li>Profile your code and understand where it spends its time</li>
<li>Generate Data and Fit Models</li>
<li>Correctness: always ensure that code infers  parameters of models given simulated data with known parameters.</li>
</ul>


<h4>Additional suggestions</h4>

<ul>
<li>Unit Testing (use testthat)</li>
<li>Create modular code with discrete chunks</li>
<li>Write functions as much as possible, put these into a personal 'misc' package</li>
</ul>


      <div class="clear"></div>
    </div>
    <p class="alt-font tight">
      Posted in&nbsp;
      
      <a href="/categories/research methods" title="research methods" rel="category tag">research methods</a>
      
    </p>
    <!--
	<p class="comments-link">
      <a href='/2013/12/a-few-best-practices-for-statistical-programming/#disqus_thread'>Comments</a>
    </p>
	-->
    <p class="by-line">
      <span class="date full-date">
        <abbr class="published" title="2013-12-24 00:00:00 +1100">24 Dec 2013</abbr>
      </span>
    </p>
    <div class="clear"></div>
  </div>
  <div class="rule"><hr/></div>

  <div class="full">
    <h1 class="entry-title">
      <a href="/2013/12/add-2d-plots-of-trend-and-wiggle-to-catastrophic-regime-shifts-plot/" title="add-2d-plots-of-trend-and-wiggle-to-catastrophic-regime-shifts-plot" rel="bookmark">add-2d-plots-of-trend-and-wiggle-to-catastrophic-regime-shifts-plot</a>
    </h1>
    <div class="entry-content full-content">
      <p><head>
<title>Catastrophic Regime Shifts Visualisation  </title>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
<meta name="title" content="Catastrophic Regime Shifts Visualisation  "/>
<meta name="generator" content="Org-mode"/>
<meta name="generated" content="2013-12-21T11:39+1100"/>
<meta name="author" content="Ivan Hanigan"/>
<meta name="description" content=""/>
<meta name="keywords" content=""/></p>



<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>


<p></head>
<body></p>

<div id="preamble">

</div>




<div id="content">
<h1 class="title">Catastrophic Regime Shifts Visualisation  </h1>


<hr/>

<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1 Try adding 2D plot of the trend overtime and the variation within basins of attraction</a>
<ul>
<li><a href="#sec-1-1">1.1 figure</a></li>
<li><a href="#sec-1-2">1.2 code</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> Try adding 2D plot of the trend overtime and the variation within basins of attraction</h2>
<div class="outline-text-2" id="text-1">

<ul>
<li>Following on from the previous work I now want to calculate the 2D paths.
</li>
<li>This will then form the basis for a "walk through" animation 
</li>
<li>Either with recorded narration or annotations that appear at the right time to describe each transition
</li>
<li>This is most of what I want to include except I have not added the wiggly variations around the main trend line, that show the system varying within the basin of attraction
</li>
<li>I got advice that Blender3d was the best way to finish this off.  Any other suggestions?
</li>
</ul>


</div>

<div id="outline-container-1-1" class="outline-3">
<h3 id="sec-1-1"><span class="section-number-3">1.1</span> figure</h3>
<div class="outline-text-3" id="text-1-1">

<p><img src="/images/TrendsAndTriggers-v2.1.gif"  alt="/images/TrendsAndTriggers-v2.1.gif" />
</p>

</div>

</div>

<div id="outline-container-1-2" class="outline-3">
<h3 id="sec-1-2"><span class="section-number-3">1.2</span> code</h3>
<div class="outline-text-3" id="text-1-2">




<pre class="src src-R"><span style="color: #586e75;"># </span><span style="color: #586e75;">functions</span>
x <span style="color: #268bd2; font-weight: bold;">&lt;-</span> seq(from=-2.5, to=2.5, by=0.1)

<span style="color: #586e75;"># </span><span style="color: #586e75;">load</span>
data_out <span style="color: #268bd2; font-weight: bold;">&lt;-</span> read.csv(<span style="color: #2aa198;">"TrendsAndTriggers-v2.csv"</span>)

<span style="color: #586e75;">## </span><span style="color: #586e75;">do</span>
x2d  <span style="color: #268bd2; font-weight: bold;">&lt;-</span> matrix(<span style="color: #b58900;">NA</span>, ncol = 3, nrow = 0)
xindex  <span style="color: #268bd2; font-weight: bold;">&lt;-</span> c(rep(-1.9, 5), 
             -1.7, -1.5 , -1.3, -1.1, 0, 1.1, 1.3, 1.5, 1.7
             , rep(2, 4))
j  <span style="color: #268bd2; font-weight: bold;">&lt;-</span> 1
xind  <span style="color: #268bd2; font-weight: bold;">&lt;-</span> xindex[j]
<span style="color: #859900; font-weight: bold;">for</span>(index <span style="color: #859900; font-weight: bold;">in</span> c(1:5,rep(5,8), 6:10)){
x2d <span style="color: #268bd2; font-weight: bold;">&lt;-</span> rbind(x2d, subset(data_out, y == index &amp; x == xind))
j <span style="color: #268bd2; font-weight: bold;">&lt;-</span> j + 1
xind <span style="color: #268bd2; font-weight: bold;">&lt;-</span> xindex[j]
}
<span style="color: #586e75;">#  </span><span style="color: #586e75;">x2d</span>

<span style="color: #586e75;">#</span><span style="color: #586e75;">png("/images/TrendsAndTriggers-v2.1.gif")</span>
setwd(<span style="color: #2aa198;">"images"</span>)
saveGIF(
{
ani.options(interval = 0.2)  
<span style="color: #859900; font-weight: bold;">for</span>(ith <span style="color: #859900; font-weight: bold;">in</span> 100:140){
layout(matrix(c(1,2,1,3,1,4), 3, 2, byrow = <span style="color: #b58900;">TRUE</span>), widths=c(2,1), heights=c(2,2,2))
<span style="color: #586e75;"># </span><span style="color: #586e75;">layout.show(4)</span>
res <span style="color: #268bd2; font-weight: bold;">&lt;-</span>  persp(x, 1:10, matrix(data_out$z, ncol = 10, nrow = length(x)),
               ylab= <span style="color: #2aa198;">"y"</span>,  xlab= <span style="color: #2aa198;">"x"</span>, zlab = <span style="color: #2aa198;">"z"</span>,  
               theta = ith, 
               phi = 42, ltheta = 120, shade = 0.75,
               expand = 0.5, col = <span style="color: #2aa198;">"lightgrey"</span>)
lines (trans3d(x2d$x, x2d$y, x2d$z, pmat = res), col = <span style="color: #2aa198;">"red"</span>, lwd = 4)
plot(x2d$x, x2d$y, type = <span style="color: #2aa198;">"l"</span>, xlab=<span style="color: #2aa198;">"x"</span>, ylab=<span style="color: #2aa198;">"y"</span>)
plot(x2d$x, x2d$z, type = <span style="color: #2aa198;">"l"</span>, xlab=<span style="color: #2aa198;">"x"</span>, ylab=<span style="color: #2aa198;">"z"</span>)
plot(x2d$y, x2d$z, type = <span style="color: #2aa198;">"l"</span>, xlab=<span style="color: #2aa198;">"y"</span>, ylab=<span style="color: #2aa198;">"z"</span>)
}
}

outdir = getwd(), movie.name = <span style="color: #2aa198;">"TrendsAndTriggers-v2.1.gif"</span>
)
setwd(<span style="color: #2aa198;">".."</span>)

<span style="color: #586e75;">#  </span><span style="color: #586e75;">dev.off()</span>
</pre>


</div>
</div>
</div>
</div>


<p></body></p>

      <div class="clear"></div>
    </div>
    <p class="alt-font tight">
      Posted in&nbsp;
      
      <a href="/categories/ecosocial tipping points" title="ecosocial tipping points" rel="category tag">ecosocial tipping points</a>
      
    </p>
    <!--
	<p class="comments-link">
      <a href='/2013/12/add-2d-plots-of-trend-and-wiggle-to-catastrophic-regime-shifts-plot/#disqus_thread'>Comments</a>
    </p>
	-->
    <p class="by-line">
      <span class="date full-date">
        <abbr class="published" title="2013-12-21 00:00:00 +1100">21 Dec 2013</abbr>
      </span>
    </p>
    <div class="clear"></div>
  </div>
  <div class="rule"><hr/></div>

  <div class="full">
    <h1 class="entry-title">
      <a href="/2013/12/animation-illustrating-catastrophic-regime-shifts/" title="Animation Illustrating Catastrophic Regime Shifts" rel="bookmark">Animation Illustrating Catastrophic Regime Shifts</a>
    </h1>
    <div class="entry-content full-content">
      <p><head>
<title>Trends and Triggers Figure </title>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
<meta name="title" content="Trends and Triggers Figure "/>
<meta name="generator" content="Org-mode"/>
<meta name="generated" content="2013-12-20T00:18+1100"/>
<meta name="author" content="Ivan Hanigan"/>
<meta name="description" content=""/>
<meta name="keywords" content=""/></p>



<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>


<p></head>
<body></p>

<div id="preamble">

</div>




<div id="content">
<h1 class="title">Trends and Triggers Figure </h1>


<hr/>


<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1 Introduction</a></li>
<li><a href="#sec-2">2 The History</a></li>
<li><a href="#sec-3">3 3D surface</a>
<ul>
<li><a href="#sec-3-1">3.1 figure</a></li>
<li><a href="#sec-3-2">3.2 code</a></li>
</ul>
</li>
<li><a href="#sec-4">4 Try an animation</a>
<ul>
<li><a href="#sec-4-1">4.1 figure</a></li>
<li><a href="#sec-4-2">4.2 code</a></li>
</ul>
</li>
<li><a href="#sec-5">5 Next Steps</a></li>
</ul>
</div>
</div>

<div id="outline-container-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> Introduction</h2>
<div class="outline-text-2" id="text-1">

<p>This work toward a enhanced figure that might be used to tell a detailed story about the mixture of trend, triggers and wiggles.
</p></div>

</div>

<div id="outline-container-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> The History</h2>
<div class="outline-text-2" id="text-2">

<p>The original image I base my imagination on is:
</p>
<ul>
<li>Scheffer, M., &amp; Carpenter, S. R. (2003). Catastrophic regime shifts in ecosystems: linking theory to observation [Review]. TRENDS in Ecology and Evolution, 18(12), 648–656. Retrieved from <a href="http://eaton.math.rpi.edu/csums/papers/Ecostability/scheffercatastrophe.pdf">http://eaton.math.rpi.edu/csums/papers/Ecostability/scheffercatastrophe.pdf</a>
</li>
</ul>


<p>
Which was based on 
</p>
<ul>
<li>Scheffer, M., Carpenter, S., Foley, J. a, Folke, C., &amp; Walker, B. (2001). Catastrophic shifts in ecosystems. Nature, 413(6856), 591–6. <i>&lt;doi:10.1038/35098000&gt;</i>
</li>
</ul>


<p>
<img src="/images/catastrophe.png"  alt="/images/catastrophe.png" />
</p>


</div>

</div>

<div id="outline-container-3" class="outline-2">
<h2 id="sec-3"><span class="section-number-2">3</span> 3D surface</h2>
<div class="outline-text-2" id="text-3">

<p>First I want to generate a 3d computer image to play with perspective and shading.
</p>
</div>

<div id="outline-container-3-1" class="outline-3">
<h3 id="sec-3-1"><span class="section-number-3">3.1</span> figure</h3>
<div class="outline-text-3" id="text-3-1">


<p>
<img src="/images/TrendsAndTriggers-v2.png"  alt="/images/TrendsAndTriggers-v2.png" />
</p></div>

</div>

<div id="outline-container-3-2" class="outline-3">
<h3 id="sec-3-2"><span class="section-number-3">3.2</span> code</h3>
<div class="outline-text-3" id="text-3-2">




<pre class="src src-R"><span style="color: #586e75;">#### </span><span style="color: #586e75;">name:generate-surface ####</span>
x <span style="color: #268bd2; font-weight: bold;">&lt;-</span> seq(from=-2.5, to=2.5, by=0.1)
zid <span style="color: #268bd2; font-weight: bold;">&lt;-</span> .1
<span style="color: #859900; font-weight: bold;">for</span>(y <span style="color: #859900; font-weight: bold;">in</span> 1:10)
{    
  z <span style="color: #268bd2; font-weight: bold;">&lt;-</span> x^4 - zid * x^3 - 7 * x^2 + x + 6
  <span style="color: #859900; font-weight: bold;">if</span>(y == 1)
  {
    data_out <span style="color: #268bd2; font-weight: bold;">&lt;-</span> cbind(x,y,z)  
  } <span style="color: #859900; font-weight: bold;">else</span> {
    data_out <span style="color: #268bd2; font-weight: bold;">&lt;-</span> rbind(data_out, cbind(x,y,z))
  }
  zid <span style="color: #268bd2; font-weight: bold;">&lt;-</span> zid + 0.1
}

data_out <span style="color: #268bd2; font-weight: bold;">&lt;-</span> as.data.frame(data_out)
write.csv(data_out, <span style="color: #2aa198;">"TrendsAndTriggers-v2.csv"</span>, row.names = F)

png(<span style="color: #2aa198;">"/images/TrendsAndTriggers-v2.png"</span>)
persp(x, 1:10, matrix(data_out$z, ncol = 10, nrow = length(x)), ylab= <span style="color: #2aa198;">""</span>,  xlab= <span style="color: #2aa198;">""</span>, zlab = <span style="color: #2aa198;">""</span>,  
      theta = 140, 
      phi = 42, 
      expand = 0.5, col = <span style="color: #2aa198;">"lightgrey"</span>)
dev.off()
</pre>



</div>
</div>

</div>

<div id="outline-container-4" class="outline-2">
<h2 id="sec-4"><span class="section-number-2">4</span> Try an animation</h2>
<div class="outline-text-2" id="text-4">

<p>I'd like to move the ball through the surface.  First need to calculate the path.
</p>
</div>

<div id="outline-container-4-1" class="outline-3">
<h3 id="sec-4-1"><span class="section-number-3">4.1</span> figure</h3>
<div class="outline-text-3" id="text-4-1">

<p><img src="/images/animation.gif"  alt="/images/animation.gif" />
</p></div>

</div>

<div id="outline-container-4-2" class="outline-3">
<h3 id="sec-4-2"><span class="section-number-3">4.2</span> code</h3>
<div class="outline-text-3" id="text-4-2">




<pre class="src src-R"><span style="color: #586e75;"># </span><span style="color: #586e75;">functions</span>
<span style="color: #859900; font-weight: bold;">if</span>(!<span style="color: #268bd2; font-weight: bold;">require</span>(animation)) install.packages(<span style="color: #2aa198;">"animation"</span>);
<span style="color: #268bd2; font-weight: bold;">require</span>(animation)

<span style="color: #586e75;"># </span><span style="color: #586e75;">load</span>
data_out <span style="color: #268bd2; font-weight: bold;">&lt;-</span> read.csv(<span style="color: #2aa198;">"TrendsAndTriggers-v2.csv"</span>)

<span style="color: #586e75;">## </span><span style="color: #586e75;">do</span>
setwd(<span style="color: #2aa198;">"images"</span>)
saveGIF(
{
  ani.options(interval = 0.2)
  xindex  <span style="color: #268bd2; font-weight: bold;">&lt;-</span> c(0, -1, rep(-1.9, 6), -1, 0, 1, rep(2, 6), 1, 0 , 0)
  j  <span style="color: #268bd2; font-weight: bold;">&lt;-</span> 1
  xind  <span style="color: #268bd2; font-weight: bold;">&lt;-</span> xindex[j]
  <span style="color: #859900; font-weight: bold;">for</span>(index <span style="color: #859900; font-weight: bold;">in</span> c(1:10, 9:1)){
  with(subset(data_out, y == index),
       plot(x, z, type = <span style="color: #2aa198;">"l"</span>, ylim = c(-15,15))
       )
  with(subset(data_out, y == index &amp; x == xind),
       points(x,z,pch=16,cex = 3)
       )
  j <span style="color: #268bd2; font-weight: bold;">&lt;-</span> j + 1
  xind <span style="color: #268bd2; font-weight: bold;">&lt;-</span> xindex[j]
  }
},
outdir = getwd()
)
setwd(<span style="color: #2aa198;">".."</span>)
</pre>


</div>
</div>

</div>

<div id="outline-container-5" class="outline-2">
<h2 id="sec-5"><span class="section-number-2">5</span> Next Steps</h2>
<div class="outline-text-2" id="text-5">

<ul>
<li>the polynomials should move up and down to give the height of originals
</li>
<li>the hump in the middle needs to change, so the ball flips more easily
</li>
<li>I'd like the ball to wiggle, add a random walk 
</li>
<li>the time series dimension needs to be shown
</li>
<li>It'd be great to combine this with 2D line plots as well
</li>
</ul>





</div>
</div>
</div>


<p></body></p>

      <div class="clear"></div>
    </div>
    <p class="alt-font tight">
      Posted in&nbsp;
      
      <a href="/categories/ecosocial tipping points" title="ecosocial tipping points" rel="category tag">ecosocial tipping points</a>
      
    </p>
    <!--
	<p class="comments-link">
      <a href='/2013/12/animation-illustrating-catastrophic-regime-shifts/#disqus_thread'>Comments</a>
    </p>
	-->
    <p class="by-line">
      <span class="date full-date">
        <abbr class="published" title="2013-12-20 00:00:00 +1100">20 Dec 2013</abbr>
      </span>
    </p>
    <div class="clear"></div>
  </div>
  <div class="rule"><hr/></div>


<div class="pagination">
  <span class="previous">
    
      
      <a href="/page14/" title="Previous Page">&laquo; Previous</a>
      
    
  </span>
  <span class="next">
    
    <a href="/page16/" title="Next Page">Next &raquo;</a>
    
  </span>
</div>
<script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid=SChamberlain"></script>

        </div>
        <div id="sidebar">
          <div id="carrington-subscribe" class="widget">
            <h2 class="widget-title">Subscribe</h2>
            <a class="feed alignright" title="RSS 2.0 feed for posts" rel="alternate" href="http://feeds.feedburner.com/Disentanglethings">
              <img src="/images/rss-button.gif" alt="latest posts" title="latest posts">
            </a>
          </div>
          <div id="carrington-about" class="widget">
            <div class="about">
              <h2 class="widget-title">About</h2>
              <p>I am a PhD Student at the Australian National University.</p>
              <a class="more" href="/about.html">more →</a>

            </div>
          </div>
<div class="sidebar">
  <div class="logos">
  
  <ul>
          
      <!-- Add in logos here -->
      <a href="http://scholar.google.com/citations?user=cGN1P0wAAAAJ&hl=en"><img src="/images/GSIcon.jpg" height=22px width=22px/></a>&nbsp;&nbsp;&nbsp;&nbsp; 
          
      <!-- Add in logos here -->
      <a href="http://orcid.org/0000-0002-6360-6793"><img src="/images/ORCID.png" height=22px width=22px/></a>&nbsp;&nbsp;&nbsp;&nbsp; 
          
      <!-- Add in logos here -->
      <a href="http://github.com/ivanhanigan"><img src="/images/github.png" height=22px width=22px/></a>&nbsp;&nbsp;&nbsp;&nbsp; 
          
      <!-- Add in logos here -->
      <a href="mailto:ivan.hanigan@gmail.com"><img src="/images/gmail.png" height=22px width=22px/></a>&nbsp;&nbsp;&nbsp;&nbsp; 
          
      <!-- Add in logos here -->
      <a href="https://twitter.com/ivanhanigan"><img src="/images/twitter.png" height=22px width=22px/></a>&nbsp;&nbsp;&nbsp;&nbsp; 
          
      <!-- Add in logos here -->
      <a href="http://www.linkedin.com/profile/view?id=AAMAAA-0wtwBnL35hDkq1UdK6vesju0LRODIVk0&trk=hp-identity-name"><img src="/images/linkedin.png" height=22px width=22px/></a>&nbsp;&nbsp;&nbsp;&nbsp; 
    
  </ul>
   
  </div>
</div>
          <!--
          	<p>
              <a href="http://ropensci.org/">
                <img src="/images/ropensci.png">
              </a>
        	</p>
			-->
			<!--
          <div id="carrington-link" class="widget">
          	<a href="http://ropensci.org/">
            <img src="/images/ropensci.png">
          </div>
          	-->
          
          <div id="primary-sidebar">
            <div class="widget">
              <h2 class="widget-title">Recent Entries</h2>
              <ul>
                
                <li>
                  <a href="/2015/11/a-picture-of-the-newnode-function-for-workflow-visualisation-in-r/" title="a-picture-of-the-newnode-function-for-workflow-visualisation-in-r" rel="bookmark">a-picture-of-the-newnode-function-for-workflow-visualisation-in-r</a>
                </li>
                
                <li>
                  <a href="/2015/11/putting-bibtex-key-into-my-lit-review-database-needs-sanitized-latex-characters/" title="Putting bibtex key into my lit review database needs sanitized latex characters" rel="bookmark">Putting bibtex key into my lit review database needs sanitized latex characters</a>
                </li>
                
                <li>
                  <a href="/2015/11/developing-a-lit-review-database/" title="Developing a lit review database" rel="bookmark">Developing a lit review database</a>
                </li>
                
                <li>
                  <a href="/2015/11/judging-the-evidence-using-a-literature-review-database/" title="Judging the evidence using a literature review database" rel="bookmark">Judging the evidence using a literature review database</a>
                </li>
                
                <li>
                  <a href="/2015/11/adopting-a-bullet-point-style/" title="Adopting a bullet point style" rel="bookmark">Adopting a bullet point style</a>
                </li>
                
              </ul>
              <h2 class="widget-title">Categories</h2>
              <ul>
<!-- <li> -->
<!--               <a class="workflow" href="/categories/workflow.html">workflow</a> -->
<!-- </li> -->
                
                <li><a href="/categories/overview">overview (7)</a></li>
                
                <li><a href="/categories/research methods">research methods (43)</a></li>
                
                <li><a href="/categories/disentangle things">disentangle things (4)</a></li>
                
                <li><a href="/categories/spatial">spatial (7)</a></li>
                
                <li><a href="/categories/extreme weather events">extreme weather events (11)</a></li>
                
                <li><a href="/categories/spatial dependence">spatial dependence (9)</a></li>
                
                <li><a href="/categories/data documentation">data documentation (32)</a></li>
                
                <li><a href="/categories/awap grids">awap grids (1)</a></li>
                
                <li><a href="/categories/cloud building">cloud building (2)</a></li>
                
                <li><a href="/categories/disentangle">disentangle (36)</a></li>
                
                <li><a href="/categories/project management">project management (3)</a></li>
                
                <li><a href="/categories/e-collaboration">e-collaboration (1)</a></li>
                
                <li><a href="/categories/ecosocial tipping points">ecosocial tipping points (2)</a></li>
                
                <li><a href="/categories/drought">drought (1)</a></li>
                
                <li><a href="/categories/morpho">morpho (1)</a></li>
                
                <li><a href="/categories/reproducible research reports">reproducible research reports (3)</a></li>
                
                <li><a href="/categories/data management">data management (2)</a></li>
                
                <li><a href="/categories/data operation">data operation (1)</a></li>
                
                <li><a href="/categories/workflow tools">workflow tools (3)</a></li>
                
                <li><a href="/categories/exploratory data analysis">exploratory data analysis (2)</a></li>
                
                <li><a href="/categories/statistical modelling">statistical modelling (1)</a></li>
                
              </ul>
              <h2 class="widget-title">Entries grouped by Tags</h2>
              <ul>
                
                <li><a href="/tag/morpho">morpho (15)</a></li>
                
                <li><a href="/tag/project management">project management (3)</a></li>
                
                <li><a href="/tag/Data Management System">Data Management System (3)</a></li>
                
                <li><a href="/tag/R-eml">R-eml (3)</a></li>
                
                <li><a href="/tag/bugs">bugs (1)</a></li>
                
                <li><a href="/tag/software">software (3)</a></li>
                
                <li><a href="/tag/writing">writing (2)</a></li>
                
                <li><a href="/tag/spatial">spatial (1)</a></li>
                
                <li><a href="/tag/diagrams">diagrams (3)</a></li>
                
                <li><a href="/tag/blogging">blogging (2)</a></li>
                
                <li><a href="/tag/metadata">metadata (1)</a></li>
                
                <li><a href="/tag/R">R (1)</a></li>
                
                <li><a href="/tag/Reproducible Research Reports">Reproducible Research Reports (2)</a></li>
                
                <li><a href="/tag/Data Management">Data Management (3)</a></li>
                
                <li><a href="/tag/Exploratory Data Analysis">Exploratory Data Analysis (1)</a></li>
                
                <li><a href="/tag/bibliometrics and literature reviewing">bibliometrics and literature reviewing (2)</a></li>
                
                <li><a href="/tag/workflow tools">workflow tools (1)</a></li>
                
              <div class="clear"></div>
              </ul>
            </div>
          </div>
          <!-- <div id="secondary-sidebar"> -->
          <!--   <div class="widget"> -->
          <!--     <h2 class="widget-title">Tags</h2> -->
          <!--     <ul> -->
          <!--        -->
          <!--       <li><a href="/tag/morpho">morpho (15)</a></li> -->
          <!--        -->
          <!--       <li><a href="/tag/project management">project management (3)</a></li> -->
          <!--        -->
          <!--       <li><a href="/tag/Data Management System">Data Management System (3)</a></li> -->
          <!--        -->
          <!--       <li><a href="/tag/R-eml">R-eml (3)</a></li> -->
          <!--        -->
          <!--       <li><a href="/tag/bugs">bugs (1)</a></li> -->
          <!--        -->
          <!--       <li><a href="/tag/software">software (3)</a></li> -->
          <!--        -->
          <!--       <li><a href="/tag/writing">writing (2)</a></li> -->
          <!--        -->
          <!--       <li><a href="/tag/spatial">spatial (1)</a></li> -->
          <!--        -->
          <!--       <li><a href="/tag/diagrams">diagrams (3)</a></li> -->
          <!--        -->
          <!--       <li><a href="/tag/blogging">blogging (2)</a></li> -->
          <!--        -->
          <!--       <li><a href="/tag/metadata">metadata (1)</a></li> -->
          <!--        -->
          <!--       <li><a href="/tag/R">R (1)</a></li> -->
          <!--        -->
          <!--       <li><a href="/tag/Reproducible Research Reports">Reproducible Research Reports (2)</a></li> -->
          <!--        -->
          <!--       <li><a href="/tag/Data Management">Data Management (3)</a></li> -->
          <!--        -->
          <!--       <li><a href="/tag/Exploratory Data Analysis">Exploratory Data Analysis (1)</a></li> -->
          <!--        -->
          <!--       <li><a href="/tag/bibliometrics and literature reviewing">bibliometrics and literature reviewing (2)</a></li> -->
          <!--        -->
          <!--       <li><a href="/tag/workflow tools">workflow tools (1)</a></li> -->
          <!--        -->
          <!--     <div class="clear"></div> -->
          <!--     </ul> -->
          <!--   </div> -->
            <!--
            <div class="widget">
              <h2 class="widget-title">Archives</h2>
              <ul>
                
              </ul>
              <div class="clear"></div>
            </div>
            -->
          </div>
        </div>
      </div>
    </div>
    <div id="footer" class="section">
      <div class="wrapper">
        <a id="generator-link">
          Banner Artwork by Cindy Hales. Site powered by
          <a href="https://github.com/mojombo/jekyll" rel="generator">Jekyll</a>
          with
          <a href="http://carringtontheme.com" title="Carrington theme for WordPress">Carrington</a>
          theme.
      </div>
      <div id="developer-link">
      </div>
    </div>
    <!--
	<a href="http://github.com/SChamberlain"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://assets2.github.com/img/e6bef7a091f5f3138b8cd40bc3e114258dd68ddf?repo=&url=http%3A%2F%2Fs3.amazonaws.com%2Fgithub%2Fribbons%2Fforkme_right_red_aa0000.png&path=" alt="Fork me on GitHub"></a>
	-->
    <script type="text/javascript">
      var disqus_shortname = 'disentanglethings';

      (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
      }());
    </script>
    <script type="text/javascript">
      var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
      document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
      try {
        var pageTracker = _gat._getTracker("UA-28059658-1");
        pageTracker._trackPageview();
      } catch(err) {}
    </script>
  </body>
</html>
