<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Ivan Hanigan - Disentangle Things</title>
    <meta name="author" content="Ivan Hanigan" />
    <link rel="stylesheet" type="text/css" href="/stylesheets/screen.css">
    <link href="http://feeds.feedburner.com/Disentanglethings" rel="alternate" title="RSS" type="application/rss+xml" />
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script type="text/javascript" src="/javascripts/jquery.github_v2.js"></script>
  </head>

  <body>


    <div id="header" class="section">
      <div class="wrapper">
        <strong id="blog-title">
          <a href="/" rel="home">Disentangle Things by Ivan Hanigan</a>
        </strong>
        <p id="blog-description"></p>
        <div id="navigation">
          <ul class="nav clearfix">
            <li> <a href="/blog/">Notes</a></li> 
            <li><a href="/research/">About Open Notebooks</a></li>
            <li><a href="/projects/">Projects</a></li>
            <li><a href="http://orcid.org/0000-0002-6360-6793">CV</a></li>
            <li><a href="http://lmgtfy.com/?q=site%3Aivanhanigan.github.io">Search this Site</a></li> 
          </ul>
        </div>
      </div>
    </div>
    <div id="main" class="section">
      <div class="wrapper">
        <div id="content">
          <h2>Welcome to my Open Notebook</h2>
            <!--<li class="first-child"><a href="/research.html">About My Notebook</a></li>-->
            <!--<li><a href="/donors.html">Donors</a></li>-->
            <!-- <li><a href="/projects.html">Data</a></li> -->
            <!--<li><a href="/publications.html">Journal Publications</a></li>-->
<p>This is an Open Notebook with <a href="https://en.wikipedia.org/wiki/Open_notebook_science" target="new">Selected Content - Delayed</a>. All content is licenced with CC-BY. Find out more <a href="/research">Here</a>.</p>

<p>  <img src="/images/ONS-SCD.png" alt="ONS-SCD.png" /></p>

          <!-- AddThis Button BEGIN -->
<!-- <div class="addthis_toolbox addthis_default_style "> -->
<!--   <a class="addthis_button_facebook_like" fb:like:layout="button_count"></a> -->
<!--   <a class="addthis_button_tweet"></a> -->
<!--   <a class="addthis_button_google_plusone" g:plusone:size="medium"></a> -->
<!--   <a class="addthis_counter addthis_pill_style"></a> -->
<!-- </div> -->
<!-- <script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid=SChamberlain"></script> -->
<!-- AddThis Button END -->

  <div class="full">
    <h1 class="entry-title">
      <a href="/2014/08/hotwire-a-morpho-package-using-r-and-xml-editor/" title="hotwire-a-morpho-package-using-r-and-xml-editor" rel="bookmark">hotwire-a-morpho-package-using-r-and-xml-editor</a>
    </h1>
    <div class="entry-content full-content">
      <h1 id="introduction">Introduction</h1>

<ul>
  <li>at my workplace we have had a significant number of issues trying to use Morpho to publish ecological data</li>
  <li>I have been interested in the R EML package as an alternative and got this advice from the authors</li>
  <li>“I’m really happy to see you combining these tools and making best use of each of their features (authoring for Morpho, automation for REML). We should think more about how to make this combination seamless.” <a href="https://github.com/ropensci/EML/issues/93">https://github.com/ropensci/EML/issues/93</a></li>
  <li>That dream still seems a long way off (and I suspect will see a re-write of morpho in R’s “shiny apps” language)</li>
  <li>but here is an attempt to circumvent some of our main issues which seem to do with using Morpho to do anything with data tables</li>
  <li>(morpho seems fine when just dealing with the documentation parts of EML)</li>
</ul>

<h1 id="create-a-minimal-morpho-eml">Create a Minimal Morpho EML</h1>

<ul>
  <li>I am going to use Morpho to create a new data package and just step thru all the steps,  add TBA to all the options</li>
  <li>another option was to create this using the REML example</li>
  <li>but then there is uncertainty if it will be accepted easily by Morpho when imported</li>
  <li>seriously, just TBA and only for the required fields (these are in red)</li>
  <li>take note of the docid number, and save locally</li>
  <li>now we can import this as our template.  lets save it as a reference file</li>
</ul>

<h4 id="code">Code:</h4>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cp ~/.morpho/profiles/hanigan/data/hanigan/XX.1 ~/tools/morpho_template_eml.xml
</code></pre></div></div>

<p></p>

<h1 id="import-to-morpho">Import to morpho</h1>
<ul>
  <li>this skeletal eml can now be imported in the File menu / import</li>
  <li>this is the ‘hotwired’ starting point of our morpho packages</li>
  <li>I want to do this for others too. so change morpho profile on your computer and import the xml</li>
  <li>gives a new package with a new morpho generated docid number</li>
  <li>add the package title, with enough identification in the title to allow quick reference</li>
  <li>SET THE ACCESS TO NOT PUBLIC BEFORE SAVING</li>
</ul>

<h1 id="generate-the-eml-skeleton-using-the-r-eml-package">generate the EML Skeleton using the R EML package</h1>

<h4 id="code-1">Code:</h4>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>library(EML)
library(devtools)
install_github("disentangle", "ivanhanigan")
unit_defs &lt;- reml_boilerplate(dat,titl = "myFile")
# you just got a quick and dirty unit_defs, these need to be made proper in morpho
# we can get the col names easily
col_defs &lt;- names(dat)
# then create a dataset with metadata
ds &lt;- data.set(dat,
               col.defs = col_defs,
               unit.defs = unit_defs
               )
# now write EML metadata file
eml_config(creator="TBA &lt;fakeaddress@gmail.com&gt;")
wd &lt;- getwd()
setwd(outdir)
eml_write(ds,
          file = gsub(".csv", "_eml_skeleton.xml", outfile),
          title = gsub(".csv", "", outfile)
          )
tempfile &lt;- dir(pattern="^data_table_")
file.rename(tempfile, outfile)
# rename the CSV file.
setwd(wd)
</code></pre></div></div>

<p></p>

<h1 id="now-attach-the-data">now attach the data</h1>
<ul>
  <li>to avoid risk of morpho getting confused it is probably safe to let it start the new dataTable tags</li>
</ul>

<p><img src="/images/morpho-hotwire-1.png" alt="morpho-hotwire-1.png" /></p>

<ul>
  <li>say it is a simple CSV</li>
  <li>say the name for the file for title, TBA for all other required fields, for attributes add one and say it is datetime (to be quick)</li>
</ul>

<p><img src="/images/morpho-hotwire-2.png" alt="morpho-hotwire-2.png" /></p>

<ul>
  <li>note the docid (41.2) and download file id (ecogrid://knb/datalibrarian2.42.1)</li>
  <li>save locally and close</li>
</ul>

<h1 id="now-replace-the-metadata-info">now replace the metadata info</h1>

<ul>
  <li>use an XML editor to go to the eml skeleton we created in morpho and also to the one created in R</li>
  <li>in the morpho generated XML find the attributeList tag within the dataTable group, mine looked like</li>
</ul>

<h4 id="code-2">Code:</h4>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;attributeList&gt;&lt;attribute id="1408536821935"&gt;...
</code></pre></div></div>
<p></p>

<ul>
  <li>and we know that the stuff we want to replace finishes with the closing tag &lt;/attributeList&gt;</li>
  <li>I think the ID is irrelevant, except Morpho won’t allow multiple of the same id number within an EML</li>
  <li>find the same and replace in the REML generated bit</li>
</ul>

<p><img src="/images/morpho-attributelist.png" alt="morpho-attributelist.png" /></p>

<p>And paste:</p>

<p><img src="/images/morpho-dataformat.png" alt="morpho-dataformat.png" /></p>

<h4 id="also-do-the">Also do the</h4>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;dataFormat&gt;&lt;/dataFormat&gt; section
</code></pre></div></div>

<h1 id="add-another-dataset">add another dataset</h1>
<ul>
  <li>assuming you already ran reml_boilerplate for this new file</li>
  <li>use morpho menus to add another datatabe</li>
  <li>save locally and close morpho</li>
  <li>open with XML editor and the REML EML Skeleton</li>
  <li>transfer dataformat and attributelist stuff</li>
  <li>go to documentation and make minor mod (space in abstract?), save locally</li>
</ul>

<h1 id="share-it-with-colleagues">share it with colleagues</h1>
<ul>
  <li>go to documentation menu &gt; access info and set/verify to public = no add user</li>
  <li>save to metacat</li>
  <li>now go to their (windows?) machine and log in as the same morpho profile,</li>
  <li>log in to the metacat and download the new package for work</li>
</ul>

      <div class="clear"></div>
    </div>
    <p class="alt-font tight">
      Posted in&nbsp;
      
      <a href="/categories/Data Documentation" title="Data Documentation" rel="category tag">Data Documentation</a>
      
    </p>
    <!--
	<p class="comments-link">
      <a href='/2014/08/hotwire-a-morpho-package-using-r-and-xml-editor/#disqus_thread'>Comments</a>
    </p>
	-->
    <p class="by-line">
      <span class="date full-date">
        <abbr class="published" title="2014-08-21 00:00:00 +0800">21 Aug 2014</abbr>
      </span>
    </p>
    <div class="clear"></div>
  </div>
  <div class="rule"><hr/></div>

  <div class="full">
    <h1 class="entry-title">
      <a href="/2014/08/morpho-doesnt-respect-quote-encapsulated-strings-in-csv/" title="morpho-doesnt-respect-quote-encapsulated-strings-in-csv" rel="bookmark">morpho-doesnt-respect-quote-encapsulated-strings-in-csv</a>
    </h1>
    <div class="entry-content full-content">
      <ul>
  <li>We discovered this known morpho bug when we try to import a textual data to morpho</li>
  <li>Even if you double check that you have selected the correct format for that data. For example, delimited or fixed width, and the correct delimiter.</li>
  <li>see this bug report <a href="https://projects.ecoinformatics.org/ecoinfo/issues/4636">Bug #4636 Morpho should ignore commas inside double-quoted fields (CSV import)</a></li>
  <li>this unwanted Morpho behaviour is due to a comma in the cell and morpho doesn’t respect quote encapsulated strings with commas in them.</li>
  <li>we do not think we can fix Morpho’s bug, and we cannot upgrade Morpho because of our Metacat version. We just need to find a workaround on that.</li>
</ul>

<p><img src="/images/morpho-quote-encapsulated.png" alt="morpho-quote-encapsulated.png" /></p>

      <div class="clear"></div>
    </div>
    <p class="alt-font tight">
      Posted in&nbsp;
      
      <a href="/categories/Data Documentation" title="Data Documentation" rel="category tag">Data Documentation</a>
      
    </p>
    <!--
	<p class="comments-link">
      <a href='/2014/08/morpho-doesnt-respect-quote-encapsulated-strings-in-csv/#disqus_thread'>Comments</a>
    </p>
	-->
    <p class="by-line">
      <span class="date full-date">
        <abbr class="published" title="2014-08-20 00:00:00 +0800">20 Aug 2014</abbr>
      </span>
    </p>
    <div class="clear"></div>
  </div>
  <div class="rule"><hr/></div>

  <div class="full">
    <h1 class="entry-title">
      <a href="/2014/07/r-eml-pgis-setting-up-the-software-stack/" title="r-eml-pgis-setting-up-the-software-stack" rel="bookmark">r-eml-pgis-setting-up-the-software-stack</a>
    </h1>
    <div class="entry-content full-content">
      <h2 id="r-eml">r-eml</h2>

<ul>
  <li>this is the R package for authoring EML</li>
</ul>

<h2 id="pgis">pgis</h2>

<ul>
  <li>This is a spatial database</li>
</ul>

<h2 id="system-description">System Description</h2>

<ul>
  <li>Ubuntu 12.04 LTS</li>
  <li>Macpro Tower</li>
</ul>

<h2 id="eml-is-a-useful-beast">EML is a useful beast</h2>

<h3 id="setting-up-the-software-stack">setting-up-the-software-stack</h3>

<ul>
  <li>First I needed devtools and this required RCurl linux package dependencies</li>
</ul>

<h4 id="code">Code</h4>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo apt-get install libcurl libcurl-devel libcurl4-gnutls-dev
</code></pre></div></div>

<p></p>

<ul>
  <li>Now trying to install EML</li>
</ul>

<h4 id="code-1">Code</h4>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>require(devtools)
install_github("EML", "ropensci")
</code></pre></div></div>

<p></p>

<ul>
  <li>then XML Depends</li>
</ul>

<h4 id="code-2">Code</h4>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo apt-get install libcurl4-openssl-dev libxml2-dev
sudo apt-get install r-cran-xml
</code></pre></div></div>

<p></p>

<ul>
  <li>rJava can be difficult, I was really dreading this but eventually stackoverflow to the rescue!</li>
</ul>

<h4 id="code-3">Code</h4>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo apt-get install openjdk-7-*
sudo apt-get install r-cran-rjava
update-java-alternatives -l
sudo update-java-alternatives -s java-1.7.0-openjdk-amd64 
sudo R CMD javareconf
R
install.packages("rJava")
library(rJava)
</code></pre></div></div>

<p></p>

<ul>
  <li>now complaining about ‘RHTMLForms’ and ‘RWordXML’</li>
</ul>

<h4 id="code-4">Code:</h4>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>install_github("RHTMLForms", "omegahat")
install.packages("RWordXML", repos="http://www.omegahat.org/R", type="source")
</code></pre></div></div>

<p></p>

<ul>
  <li>on we go</li>
</ul>

<h4 id="code-5">Code</h4>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>install.packages(c("knitr", "rfigshare", "testthat", "RCurl", "dataone", "rrdf"))
</code></pre></div></div>

<p></p>

<h2 id="rgdal">RGDAL</h2>

<ul>
  <li>Spatial toolbox</li>
</ul>

<h4 id="code-6">Code</h4>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo apt-get update
sudo apt-get upgrade
sudo apt-get install libgdal1-dev libproj-dev
gdal-config --version
sudo R
install.packages("rgdal")
</code></pre></div></div>

<p></p>

<h2 id="postgresql-93">PostgreSQL 9.3</h2>

<ul>
  <li>following comes from <a href="http://technobytz.com/install-postgresql-9-3-ubuntu.html">http://technobytz.com/install-postgresql-9-3-ubuntu.html</a></li>
</ul>

<h4 id="code-7">Code:</h4>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo apt-get update
sudo apt-get -y install python-software-properties
wget --quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc | sudo apt-key add -
sudo sh -c 'echo "deb http://apt.postgresql.org/pub/repos/apt/ precise-pgdg main" &gt;&gt; /etc/apt/sources.list.d/postgresql.list'
sudo apt-get update
sudo apt-get install postgresql-9.3 pgadmin3
sudo -u postgres psql
create role user_name login password 'passwd';
show hba_file ;
#/etc/postgresql/9.3/main/pg_hba.conf
\q
sudo nano /etc/postgresql/9.3/main/pg_hba.conf
# add users to listen for at the firewall
sudo nano /etc/postgresql/9.3/main/postgresql.conf
# listenaddresses = *
sudo services postgresql restart
sudo ufw allow from my.ip.address.0/24 to any port 5432
</code></pre></div></div>

<p></p>

<h2 id="postgis-20">PostGIS 2.0</h2>

<ul>
  <li>following comes from <a href="http://technobytz.com/install-postgis-postgresql-9-3-ubuntu.html">http://technobytz.com/install-postgis-postgresql-9-3-ubuntu.html</a></li>
</ul>

<h4 id="code-8">Code:</h4>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo apt-get update
sudo apt-get install postgresql-9.3-postgis-2.1 -f
sudo su
su - postgres
createdb postgis_ltern
psql -d postgis_ltern -U postgres  
CREATE EXTENSION postgis;  
CREATE EXTENSION postgis_topology;  
CREATE ROLE public_group;
CREATE ROLE ivan_hanigan LOGIN PASSWORD 'password';
GRANT public_group TO ivan_hanigan;
grant usage on schema public to public_group;
GRANT select ON ALL TABLES IN SCHEMA public TO public_group;
grant execute on all functions in schema public to public_group;
grant select on all sequences in schema public to public_group;
grant select on table geometry_columns to public_group;
grant select on table spatial_ref_sys to public_group;
grant select on table geography_columns to public_group;
grant select on table raster_columns to public_group;
grant select on table raster_overviews to public_group;
</code></pre></div></div>

<p></p>

<h2 id="for-transforming-agd-66-to-gda94">For transforming AGD 66 to GDA94</h2>

<ul>
  <li>A special transformations grid file is required to be added to the PROJ.4 files for reprojecting the Australian projections AGD66 to GDA94.</li>
  <li>Thanks to <a href="https://github.com/josephguillaume">Joe Guillaume</a> and <a href="http://stackoverflow.com/users/103225/fmark">Francis Markham</a> for providing this solution.</li>
</ul>

<h4 id="code-transformations-grid-for-australian-projections">Code: transformations grid for Australian projections</h4>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd /usr/share/proj
wget http://www.icsm.gov.au/gda/gdatm/national66.zip  
unzip national66.zip
mv "A66 National (13.09.01).gsb" aust_national_agd66_13.09.01.gsb
su - postgres 
psql -d mydb

UPDATE spatial_ref_sys SET
proj4text='+proj=longlat +ellps=aust_SA +nadgrids=aust_national_agd66_13.09.01.gsb +wktext'
where srid=4202;
\q
exit
</code></pre></div></div>
<p></p>

<h2 id="make-a-spatial-dataset">make a spatial dataset</h2>
<h4 id="code-9">Code</h4>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>require(devtools)
install_github("swishdbtools", "swish-climate-impact-assessment")
require(swishdbtools)
require(ggmap)
 
ch  &lt;- connect2postgres2("postgis_ltern")
 
location_names &lt;- c("linnaeus way acton canberra act", "biology place acton canberra act")
locations &lt;- geocode(location_names)
locations &lt;- cbind(location_names, locations)
 
dbWriteTable(ch, "anu_gisforum_locations", locations, row.names = F)
sql &lt;- points2geom("public", "anu_gisforum_locations", col_lat = "lat", col_long = "lon")
cat(sql)
dbSendQuery(ch,
            sql
            )
</code></pre></div></div>

<p></p>

<h2 id="this-can-now-be-shown-in-quantum-gis">This can now be shown in Quantum GIS</h2>

<p><img src="/images/gisforum_locations.png" alt="images/gisforum_locations.png" /></p>

<h3 id="todo">TODO:</h3>

<ul>
  <li>add EML for this using R</li>
  <li>finesse with Morpho (requires further Java shennanigans)</li>
  <li>publish something to KNB using R dataone package</li>
</ul>

      <div class="clear"></div>
    </div>
    <p class="alt-font tight">
      Posted in&nbsp;
      
      <a href="/categories/disentangle" title="disentangle" rel="category tag">disentangle</a>
      
    </p>
    <!--
	<p class="comments-link">
      <a href='/2014/07/r-eml-pgis-setting-up-the-software-stack/#disqus_thread'>Comments</a>
    </p>
	-->
    <p class="by-line">
      <span class="date full-date">
        <abbr class="published" title="2014-07-12 00:00:00 +0800">12 Jul 2014</abbr>
      </span>
    </p>
    <div class="clear"></div>
  </div>
  <div class="rule"><hr/></div>

  <div class="full">
    <h1 class="entry-title">
      <a href="/2014/06/data-dictionary-function-needed-further-upgrades-to-my-misc-package/" title="data-dictionary-function-needed-further-upgrades-to-my-misc-package" rel="bookmark">data-dictionary-function-needed-further-upgrades-to-my-misc-package</a>
    </h1>
    <div class="entry-content full-content">
      <ul>
  <li>I’ve been enjoying summarising datasets with my data_dictionary function</li>
  <li>There was a bug when a date variable had any missings.</li>
  <li>I have modified the function to cope with these so have released version 1.2</li>
  <li><a href="http://ivanhanigan.github.io/disentangle/lib/disentangle_1.2.zip">Windows Version is Downloadable Here</a></li>
  <li>Linux and Mac users can just run this R code</li>
</ul>

<h4 id="r-code">R Code:</h4>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>require(devtools)
install_github("disentangle", "ivanhanigan")
</code></pre></div></div>

      <div class="clear"></div>
    </div>
    <p class="alt-font tight">
      Posted in&nbsp;
      
      <a href="/categories/disentangle" title="disentangle" rel="category tag">disentangle</a>
      
    </p>
    <!--
	<p class="comments-link">
      <a href='/2014/06/data-dictionary-function-needed-further-upgrades-to-my-misc-package/#disqus_thread'>Comments</a>
    </p>
	-->
    <p class="by-line">
      <span class="date full-date">
        <abbr class="published" title="2014-06-24 00:00:00 +0800">24 Jun 2014</abbr>
      </span>
    </p>
    <div class="clear"></div>
  </div>
  <div class="rule"><hr/></div>

  <div class="full">
    <h1 class="entry-title">
      <a href="/2014/06/data-dictionary-function-needed-upgrade-to-my-misc-package/" title="data-dictionary-function-needed-upgrade-to-my-misc-package" rel="bookmark">data-dictionary-function-needed-upgrade-to-my-misc-package</a>
    </h1>
    <div class="entry-content full-content">
      <ul>
  <li>Recently I got a lot of files with columns that are all missing.  I had to modify the ‘data_dictionary’ function to cope with these so have released version 1.1</li>
  <li><a href="http://ivanhanigan.github.io/disentangle/lib/disentangle_1.1.zip">Windows Version is Downloadable Here</a></li>
  <li>Linux and Mac users can just run this R code</li>
</ul>

<h4 id="r-code">R Code:</h4>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>require(devtools)
install_github("disentangle", "ivanhanigan")
</code></pre></div></div>

<p></p>

<ul>
  <li>In my ‘disentangle’ package of miscellaneous tools, the data_dictionary function is designed to produce descriptive summary statistics in a familiar way to the FREQUENCIES command for SPSS</li>
  <li>I chose to emulate the SPSS output because I think it is a pretty decent summary statistics table, and there are loads of users who have already been introduced to this style of output</li>
  <li>I wrote it because I had not got exactly what I wanted from the reporttools or stargazer packages which also have similar summary stats functions</li>
  <li>I chose to call it data_dictionary because I think that the alternatives (like ‘frequencise’ or ‘code_book’ are not as immediately intuitive as to what you get)</li>
  <li>the function I wrote returns a data.frame with the variable name, a simplified type (character, number or date)</li>
</ul>

<h4 id="codedata-dictionary-function-needed-upgrade-to-my-misc-package">Code:data-dictionary-function-needed-upgrade-to-my-misc-package</h4>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># functions
require(devtools)
install_github("disentangle", "ivanhanigan")
require(disentangle)
require(xtable)

# load
fpath &lt;- system.file("extdata/civst_gend_sector.csv", package = "disentangle")
fpath
civst_gend_sector &lt;- read.csv(fpath)
civst_gend_sector$datevar &lt;- as.Date(round(rnorm(nrow(civst_gend_sector), Sys.Date(),10)), origin = "1970-01-01")
civst_gend_sector$missing_blahblah_variable  &lt;- NA

# check
str(civst_gend_sector)

#do
data_dict(civst_gend_sector, "civil_status")
data_dict(civst_gend_sector, "datevar")
data_dict(civst_gend_sector, "number_of_cases")
data_dict(civst_gend_sector, "missing_blahblah_variable")

dataDictionary &lt;- data_dictionary(civst_gend_sector,
                                  show_levels = -1)

print(xtable(dataDictionary), type = "html", include.rownames = F)
</code></pre></div></div>

<p></p>

<!-- html table generated in R 3.1.0 by xtable 1.7-1 package -->
<!-- Wed Jun 18 22:41:49 2014 -->
<table border="1">
<tr> <th> Variable </th> <th> Type </th> <th> Attributes </th> <th> Value </th> <th> Count </th> <th> Percent </th>  </tr>
  <tr> <td> civil_status </td> <td> character </td> <td> divorced/widowed </td> <td>  </td> <td> 6 </td> <td align="right"> 33.33 </td> </tr>
  <tr> <td>  </td> <td>  </td> <td> married </td> <td>  </td> <td> 6 </td> <td align="right"> 33.33 </td> </tr>
  <tr> <td>  </td> <td>  </td> <td> single </td> <td>  </td> <td> 6 </td> <td align="right"> 33.33 </td> </tr>
  <tr> <td> gender </td> <td> character </td> <td> female </td> <td>  </td> <td> 9 </td> <td align="right"> 50.00 </td> </tr>
  <tr> <td>  </td> <td>  </td> <td> male </td> <td>  </td> <td> 9 </td> <td align="right"> 50.00 </td> </tr>
  <tr> <td> activity_sector </td> <td> character </td> <td> primary </td> <td>  </td> <td> 6 </td> <td align="right"> 33.33 </td> </tr>
  <tr> <td>  </td> <td>  </td> <td> secondary </td> <td>  </td> <td> 6 </td> <td align="right"> 33.33 </td> </tr>
  <tr> <td>  </td> <td>  </td> <td> tertiary </td> <td>  </td> <td> 6 </td> <td align="right"> 33.33 </td> </tr>
  <tr> <td> number_of_cases </td> <td> number </td> <td> Min. </td> <td> 0 </td> <td>  </td> <td align="right">  </td> </tr>
  <tr> <td>  </td> <td>  </td> <td> 1st Qu. </td> <td> 5 </td> <td>  </td> <td align="right">  </td> </tr>
  <tr> <td>  </td> <td>  </td> <td> Median </td> <td> 9 </td> <td>  </td> <td align="right">  </td> </tr>
  <tr> <td>  </td> <td>  </td> <td> Mean </td> <td> 15.17 </td> <td>  </td> <td align="right">  </td> </tr>
  <tr> <td>  </td> <td>  </td> <td> 3rd Qu. </td> <td> 17 </td> <td>  </td> <td align="right">  </td> </tr>
  <tr> <td>  </td> <td>  </td> <td> Max. </td> <td> 50 </td> <td>  </td> <td align="right">  </td> </tr>
  <tr> <td> datevar </td> <td> date </td> <td> Min. </td> <td> 2014-05-26 </td> <td>  </td> <td align="right">  </td> </tr>
  <tr> <td>  </td> <td>  </td> <td> 1st Qu. </td> <td> 2014-06-07 </td> <td>  </td> <td align="right">  </td> </tr>
  <tr> <td>  </td> <td>  </td> <td> Median </td> <td> 2014-06-15 </td> <td>  </td> <td align="right">  </td> </tr>
  <tr> <td>  </td> <td>  </td> <td> Mean </td> <td> 2014-06-14 </td> <td>  </td> <td align="right">  </td> </tr>
  <tr> <td>  </td> <td>  </td> <td> 3rd Qu. </td> <td> 2014-06-18 </td> <td>  </td> <td align="right">  </td> </tr>
  <tr> <td>  </td> <td>  </td> <td> Max. </td> <td> 2014-07-05 </td> <td>  </td> <td align="right">  </td> </tr>
  <tr> <td> missing_blahblah_variable </td> <td> missing </td> <td> NA's </td> <td>  </td> <td> 18 </td> <td align="right"> 100.00 </td> </tr>
  </table>

      <div class="clear"></div>
    </div>
    <p class="alt-font tight">
      Posted in&nbsp;
      
      <a href="/categories/disentangle" title="disentangle" rel="category tag">disentangle</a>
      
    </p>
    <!--
	<p class="comments-link">
      <a href='/2014/06/data-dictionary-function-needed-upgrade-to-my-misc-package/#disqus_thread'>Comments</a>
    </p>
	-->
    <p class="by-line">
      <span class="date full-date">
        <abbr class="published" title="2014-06-18 00:00:00 +0800">18 Jun 2014</abbr>
      </span>
    </p>
    <div class="clear"></div>
  </div>
  <div class="rule"><hr/></div>


<div class="pagination">
  <span class="previous">
    
      
      <a href="/page15/" title="Previous Page">&laquo; Previous</a>
      
    
  </span>
  <span class="next">
    
    <a href="/page17/" title="Next Page">Next &raquo;</a>
    
  </span>
</div>
<!-- <script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid=SChamberlain"></script> -->

        </div>
        <div id="sidebar">
          <div id="carrington-subscribe" class="widget">
            <h2 class="widget-title">Subscribe</h2>
            <a class="feed alignright" title="RSS 2.0 feed for posts" rel="alternate" href="http://feeds.feedburner.com/Disentanglethings">
              <img src="/images/rss-button.gif" alt="latest posts" title="latest posts">
            </a>
          </div>
          <div id="carrington-about" class="widget">
            <div class="about">
              <h2 class="widget-title">About</h2>
              <p>I am an Environmental Epidemiologist and Senior Lecturer in Climate Change and Health at Curtin University in Western Australia.</p>
              <a class="more" href="/about">more →</a>

            </div>
          </div>
<div class="sidebar">
  <div class="logos">
  
  <ul>
          
      <!-- Add in logos here -->
      <a href="http://scholar.google.com/citations?user=cGN1P0wAAAAJ&hl=en"><img src="/images/GSIcon.jpg" height=22px width=22px/></a>&nbsp;&nbsp;&nbsp;&nbsp; 
          
      <!-- Add in logos here -->
      <a href="http://orcid.org/0000-0002-6360-6793"><img src="/images/ORCID.png" height=22px width=22px/></a>&nbsp;&nbsp;&nbsp;&nbsp; 
          
      <!-- Add in logos here -->
      <a href="http://github.com/ivanhanigan"><img src="/images/github.png" height=22px width=22px/></a>&nbsp;&nbsp;&nbsp;&nbsp; 
          
      <!-- Add in logos here -->
      <a href="mailto:ivan.hanigan@gmail.com"><img src="/images/gmail.png" height=22px width=22px/></a>&nbsp;&nbsp;&nbsp;&nbsp; 
          
      <!-- Add in logos here -->
      <a href="https://twitter.com/ivanhanigan"><img src="/images/twitter.png" height=22px width=22px/></a>&nbsp;&nbsp;&nbsp;&nbsp; 
    
  </ul>
   
  </div>
</div>
          <!--
          	<p>
              <a href="http://ropensci.org/">
                <img src="/images/ropensci.png">
              </a>
        	</p>
			-->
			<!--
          <div id="carrington-link" class="widget">
          	<a href="http://ropensci.org/">
            <img src="/images/ropensci.png">
          </div>
          	-->
          
          <div id="primary-sidebar">
            <div class="widget">
              <h2 class="widget-title">Recent Entries</h2>
              <ul>
                
                <li>
                  <a href="/2022/10/MJA-Lancet-Countdown-report-2022/" title="MJA-Lancet Countdown report 2022" rel="bookmark">MJA-Lancet Countdown report 2022</a>
                </li>
                
                <li>
                  <a href="/2019/07/environmental-health-indicators/" title="Environmental health indicators" rel="bookmark">Environmental health indicators</a>
                </li>
                
                <li>
                  <a href="/2019/07/tscourse-chicago-heatwave/" title="Time series regression in R course codes for Chicago Heatwave" rel="bookmark">Time series regression in R course codes for Chicago Heatwave</a>
                </li>
                
                <li>
                  <a href="/2018/11/climate-change-policy-inaction-threatens-lives/" title="Climate Change policy inaction threatens lives" rel="bookmark">Climate Change policy inaction threatens lives</a>
                </li>
                
                <li>
                  <a href="/2018/03/iucn-red-list-ecosystems-framework-applicability-to-health/" title="IUCN Red List Ecosystems Framework Applicability To Health Impact Assessments" rel="bookmark">IUCN Red List Ecosystems Framework Applicability To Health Impact Assessments</a>
                </li>
                
              </ul>
              <h2 class="widget-title">Categories</h2>
              <ul>
<!-- <li> -->
<!--               <a class="workflow" href="/categories/workflow.html">workflow</a> -->
<!-- </li> -->
                
                <li><a href="/categories/overview">overview (7)</a></li>
                
                <li><a href="/categories/research methods">research methods (43)</a></li>
                
                <li><a href="/categories/disentangle things">disentangle things (4)</a></li>
                
                <li><a href="/categories/spatial">spatial (9)</a></li>
                
                <li><a href="/categories/extreme weather events">extreme weather events (8)</a></li>
                
                <li><a href="/categories/spatial dependence">spatial dependence (10)</a></li>
                
                <li><a href="/categories/Data Documentation">Data Documentation (31)</a></li>
                
                <li><a href="/categories/awap grids">awap grids (3)</a></li>
                
                <li><a href="/categories/climatic and agricultural drought">climatic and agricultural drought (3)</a></li>
                
                <li><a href="/categories/cloud building">cloud building (3)</a></li>
                
                <li><a href="/categories/disentangle">disentangle (50)</a></li>
                
                <li><a href="/categories/Project Management">Project Management (2)</a></li>
                
                <li><a href="/categories/e-collaboration">e-collaboration (1)</a></li>
                
                <li><a href="/categories/ecosocial tipping points">ecosocial tipping points (2)</a></li>
                
                <li><a href="/categories/Drought">Drought (1)</a></li>
                
                <li><a href="/categories/project management">project management (1)</a></li>
                
                <li><a href="/categories/morpho">morpho (1)</a></li>
                
                <li><a href="/categories/data documentation">data documentation (1)</a></li>
                
                <li><a href="/categories/reproducible research reports">reproducible research reports (2)</a></li>
                
                <li><a href="/categories/Data Management">Data Management (2)</a></li>
                
                <li><a href="/categories/Reproducible Research Reports">Reproducible Research Reports (2)</a></li>
                
                <li><a href="/categories/Data Operation">Data Operation (2)</a></li>
                
                <li><a href="/categories/Workflow tools">Workflow tools (3)</a></li>
                
                <li><a href="/categories/Exploratory Data Analysis">Exploratory Data Analysis (2)</a></li>
                
                <li><a href="/categories/statistical modelling">statistical modelling (2)</a></li>
                
                <li><a href="/categories/blog home">blog home (1)</a></li>
                
                <li><a href="/categories/reproducible research pipelines">reproducible research pipelines (2)</a></li>
                
                <li><a href="/categories/reproducible research">reproducible research (2)</a></li>
                
                <li><a href="/categories/writing">writing (1)</a></li>
                
                <li><a href="/categories/climate data">climate data (1)</a></li>
                
                <li><a href="/categories/exploratory data analysis">exploratory data analysis (2)</a></li>
                
                <li><a href="/categories/bibliometrics and literature reviewing">bibliometrics and literature reviewing (1)</a></li>
                
                <li><a href="/categories/drought awap grids">drought awap grids (1)</a></li>
                
                <li><a href="/categories/drought">drought (2)</a></li>
                
                <li><a href="/categories/data operation">data operation (2)</a></li>
                
                <li><a href="/categories/training">training (2)</a></li>
                
                <li><a href="/categories/swish">swish (3)</a></li>
                
                <li><a href="/categories/air pollution">air pollution (2)</a></li>
                
                <li><a href="/categories/policy relevant research">policy relevant research (3)</a></li>
                
                <li><a href="/categories/climate change">climate change (2)</a></li>
                
              </ul>
              <h2 class="widget-title">Entries grouped by Tags</h2>
              <ul>
                
                <li><a href="/tag/morpho">morpho (15)</a></li>
                
                <li><a href="/tag/project management">project management (3)</a></li>
                
                <li><a href="/tag/Data Management System">Data Management System (3)</a></li>
                
                <li><a href="/tag/R-eml">R-eml (3)</a></li>
                
                <li><a href="/tag/bugs">bugs (1)</a></li>
                
                <li><a href="/tag/software">software (3)</a></li>
                
                <li><a href="/tag/writing">writing (2)</a></li>
                
                <li><a href="/tag/spatial">spatial (1)</a></li>
                
                <li><a href="/tag/diagrams">diagrams (3)</a></li>
                
                <li><a href="/tag/blogging">blogging (2)</a></li>
                
                <li><a href="/tag/metadata">metadata (1)</a></li>
                
                <li><a href="/tag/R">R (1)</a></li>
                
                <li><a href="/tag/Reproducible Research Reports">Reproducible Research Reports (2)</a></li>
                
                <li><a href="/tag/Data Management">Data Management (3)</a></li>
                
                <li><a href="/tag/Exploratory Data Analysis">Exploratory Data Analysis (1)</a></li>
                
                <li><a href="/tag/bibliometrics and literature reviewing">bibliometrics and literature reviewing (2)</a></li>
                
                <li><a href="/tag/workflow tools">workflow tools (1)</a></li>
                
                <li><a href="/tag/data management">data management (1)</a></li>
                
                <li><a href="/tag/exploratory data analysis">exploratory data analysis (1)</a></li>
                
              <div class="clear"></div>
              </ul>
            </div>
          </div>
          <!-- <div id="secondary-sidebar"> -->
          <!--   <div class="widget"> -->
          <!--     <h2 class="widget-title">Tags</h2> -->
          <!--     <ul> -->
          <!--        -->
          <!--       <li><a href="/tag/morpho">morpho (15)</a></li> -->
          <!--        -->
          <!--       <li><a href="/tag/project management">project management (3)</a></li> -->
          <!--        -->
          <!--       <li><a href="/tag/Data Management System">Data Management System (3)</a></li> -->
          <!--        -->
          <!--       <li><a href="/tag/R-eml">R-eml (3)</a></li> -->
          <!--        -->
          <!--       <li><a href="/tag/bugs">bugs (1)</a></li> -->
          <!--        -->
          <!--       <li><a href="/tag/software">software (3)</a></li> -->
          <!--        -->
          <!--       <li><a href="/tag/writing">writing (2)</a></li> -->
          <!--        -->
          <!--       <li><a href="/tag/spatial">spatial (1)</a></li> -->
          <!--        -->
          <!--       <li><a href="/tag/diagrams">diagrams (3)</a></li> -->
          <!--        -->
          <!--       <li><a href="/tag/blogging">blogging (2)</a></li> -->
          <!--        -->
          <!--       <li><a href="/tag/metadata">metadata (1)</a></li> -->
          <!--        -->
          <!--       <li><a href="/tag/R">R (1)</a></li> -->
          <!--        -->
          <!--       <li><a href="/tag/Reproducible Research Reports">Reproducible Research Reports (2)</a></li> -->
          <!--        -->
          <!--       <li><a href="/tag/Data Management">Data Management (3)</a></li> -->
          <!--        -->
          <!--       <li><a href="/tag/Exploratory Data Analysis">Exploratory Data Analysis (1)</a></li> -->
          <!--        -->
          <!--       <li><a href="/tag/bibliometrics and literature reviewing">bibliometrics and literature reviewing (2)</a></li> -->
          <!--        -->
          <!--       <li><a href="/tag/workflow tools">workflow tools (1)</a></li> -->
          <!--        -->
          <!--       <li><a href="/tag/data management">data management (1)</a></li> -->
          <!--        -->
          <!--       <li><a href="/tag/exploratory data analysis">exploratory data analysis (1)</a></li> -->
          <!--        -->
          <!--     <div class="clear"></div> -->
          <!--     </ul> -->
          <!--   </div> -->
            <!--
            <div class="widget">
              <h2 class="widget-title">Archives</h2>
              <ul>
                
              </ul>
              <div class="clear"></div>
            </div>
            -->
          </div>
        </div>
      </div>
    </div>
    <div id="footer" class="section">
      <div class="wrapper">
        <a id="generator-link">
          Banner Artwork by Cindy Hales. Site powered by
          <a href="https://github.com/mojombo/jekyll" rel="generator">Jekyll</a>
          with
          <a href="http://carringtontheme.com" title="Carrington theme for WordPress">Carrington</a>
          theme.
      </div>
      <div id="developer-link">
      </div>
    </div>
    <!--
	<a href="http://github.com/SChamberlain"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://assets2.github.com/img/e6bef7a091f5f3138b8cd40bc3e114258dd68ddf?repo=&url=http%3A%2F%2Fs3.amazonaws.com%2Fgithub%2Fribbons%2Fforkme_right_red_aa0000.png&path=" alt="Fork me on GitHub"></a>
	-->
    <script type="text/javascript">
      var disqus_shortname = 'disentanglethings';

      (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
      }());
    </script>
    <script type="text/javascript">
      var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
      document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
      try {
        var pageTracker = _gat._getTracker("UA-28059658-1");
        pageTracker._trackPageview();
      } catch(err) {}
    </script>
  </body>
</html>
