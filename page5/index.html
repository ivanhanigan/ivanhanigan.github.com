<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Ivan Hanigan - Disentangle Things</title>
    <meta name="author" content="Ivan Hanigan" />
    <link rel="stylesheet" type="text/css" href="/stylesheets/screen.css">
    <link href="http://feeds.feedburner.com/Disentanglethings" rel="alternate" title="RSS" type="application/rss+xml" />
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script type="text/javascript" src="/javascripts/jquery.github_v2.js"></script>
  </head>

  <body>


    <div id="header" class="section">
      <div class="wrapper">
        <strong id="blog-title">
          <a href="/" rel="home">Disentangle Things by Ivan Hanigan</a>
        </strong>
        <p id="blog-description"></p>
        <div id="navigation">
          <ul class="nav clearfix">
            <li class="first-child"><a href="/research.html">About My Notebook</a></li>
            <li> <a href="/blog.html">Entries</a></li> 

            <li><a href="/about.html">About Me</a></li>
            <li><a href="/publications.html">Journal Publications</a></li>
            <li><a href="/projects.html">Software</a></li>
            <li><a href="/projects.html">Data</a></li>
            <li><a href="/cv.html">My CV</a></li>
            <li><a href="http://lmgtfy.com/?q=site%3Aivanhanigan.github.io">Search this Site</a></li> 
            <!--<li><a href="/donors.html">Donors</a></li>-->
          </ul>
        </div>
      </div>
    </div>
    <div id="main" class="section">
      <div class="wrapper">
        <div id="content">
          <h2>Welcome to my Open Notebook</h2>

<p>This is an Open Notebook with <a href="http://onsclaims.wikispaces.com/">Selected Content - Delayed</a>. Find out more <a href="/research.html">Here</a>.</p>

<p>  <img src="/images/ONS-SCD.png" alt="ONS-SCD.png" /></p>

          <!-- AddThis Button BEGIN -->
<div class="addthis_toolbox addthis_default_style ">
  <a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
  <a class="addthis_button_tweet"></a>
  <a class="addthis_button_google_plusone" g:plusone:size="medium"></a>
  <a class="addthis_counter addthis_pill_style"></a>
</div>
<script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid=SChamberlain"></script>
<!-- AddThis Button END -->

  <div class="full">
    <h1 class="entry-title">
      <a href="/2014/04/workaround-for-installing-morpho-on-a-windows-network/" title="workaround-for-installing-morpho-on-a-windows-network" rel="bookmark">workaround-for-installing-morpho-on-a-windows-network</a>
    </h1>
    <div class="entry-content full-content">
      <h3>Introduction</h3>

<p>Morpho is an open source piece of software designed to host all kinds of ecological data.  It is used to describe data collections. We publish to Metacat using Morpho.  For technical reasons, we have our own server running an older version of the Metacat software so have to run an old version of Morpho (v1.8).</p>

<h3>Installation and configuration</h3>

<p>TERN specific instructions are replicated across:</p>

<ul>
<li><a href="http://www.tern-supersites.net.au/index.php/data/repository-tutorial">http://www.tern-supersites.net.au/index.php/data/repository-tutorial</a></li>
<li><a href="http://www.ltern.org.au/index.php/data/guides-and-tutorial">http://www.ltern.org.au/index.php/data/guides-and-tutorial</a></li>
</ul>


<h3>Morpho issue on Windows in our network environment</h3>

<p>The ANU Fenner School came across this issue. Our local IT department have discovered with Morpho (v1.8) Installation on Windows in our network environment, Morpho installs a hidden directory called ".morpho" and this is written to a PATH next to the User Desktop. This is actually on a network share with a very small quota.</p>

<p>Therefore as Morpho writes data there it can easily exceed the quota causing the software to stop working.  All users of Morpho on such a network should check for the location of the ".morpho" directory and if it is located with such a restricted quota then alternative arrangements need to be made.</p>

<p>At the ANU Fenner School we opted to set up local user accounts (the ".morpho" file is then on the C drive) and this user is accessible from the main User's account.  The Morpho files are therefore stored on the C drive which is of course a danger for hard disk failure and data loss.</p>

<p>We feel that as long as the draft packages are saved to the networked Metacat (with the maximum access restrictions in force for draft work) then if the local hard disk dies then the draft data package is not lost but can be accessed again from a new Morpho install and the Metacat server.</p>

<p>Issues remain about the long term solution to this problem but this will work in the short-term.</p>

<p>We think you can also create a junction (symlink) so that .morpho/ can point to a different location (perhaps another network storage with bigger capacity and automated backup).</p>

      <div class="clear"></div>
    </div>
    <p class="alt-font tight">
      Posted in&nbsp;
      
      <a href="/categories/data documentation" title="data documentation" rel="category tag">data documentation</a>
      
    </p>
    <!--
	<p class="comments-link">
      <a href='/2014/04/workaround-for-installing-morpho-on-a-windows-network/#disqus_thread'>Comments</a>
    </p>
	-->
    <p class="by-line">
      <span class="date full-date">
        <abbr class="published" title="2014-04-29 00:00:00 +1000">29 Apr 2014</abbr>
      </span>
    </p>
    <div class="clear"></div>
  </div>
  <div class="rule"><hr/></div>

  <div class="full">
    <h1 class="entry-title">
      <a href="/2014/04/using-r-eml-to-input-large-numbers-of-variables-part-2/" title="using-r-eml-to-input-large-numbers-of-variables-part-2" rel="bookmark">using-r-eml-to-input-large-numbers-of-variables-part-2</a>
    </h1>
    <div class="entry-content full-content">
      <p>In my <a href="/2014/04/using-reml-to-input-large-number-of-column-descriptions">previous post</a> I showed a workaround to input large number of variabels than Morpho could handle.  I have found out an interesting thing about the R EML package data.set approach.  The unit.defs depends on the type of the column in the data frame (R knows if you try to trick it).  Rather than describe all the levels of the factor vars, I wanted to just have simple descriptions for numeric or character type columns.  If numeric it should be number and if character it can be the name of the column.  Because I am just trying to sidestep the issue with morpho failing to input the 200 plus variables I just need to create a dataframe with either number or character (not factor).</p>

<p>For an example:</p>

<h4>R Code:</h4>

<pre><code>require(EML)
fname &lt;- dir("myData", full.names=T, pattern = 'csv')
fname
fname  &lt;- "myData/paper_data.csv"  
dat  &lt;- read.csv(fname, stringsAsFactor=F)
# the variable names include special characters such as % and [ so need to do some extra work
names_dat  &lt;- read.csv(fname, nrow=1, header=F, stringsAsFactor=F)
names(dat) &lt;- names_dat
head(dat)
nrow(dat)
# the first 46 variables are nominal, thereafter they are all numeric
str(dat[,1:46])
str(dat[,47:49])
# but these numerics are character for some reason
table(dat[ , 47])
# it is because the raw data had * instead of NA...  I could use na.strings when I call read.table above, or deal with it here
# I'll just convert them to numerics now
dat1 &lt;- dat[,1:46]
dat2 &lt;- dat[,47:ncol(dat)]
dat2[dat2 == "*"] &lt;- NA
for(i in 1:ncol(dat2)){
  dat2[,i]  &lt;- as.numeric(dat2[ , i])
}
str(dat2)
# good that has set them up properly, also make sure all the text are character type
for(i in 1:ncol(dat1)){
  dat1[,i]  &lt;- as.character(dat1[ , i])
}
# recombine
dat &lt;- cbind(dat1,dat2)
str(dat)
# then I add to it the definition for the constructed variables
unit_defs &lt;- list()
for(i in 1:46){
    unit_defs[[i]] &lt;- names(dat[i])
}
for(i in 47:ncol(dat)){
    unit_defs[[i]] &lt;- "number"
}
unit_defs[1:20]
col_defs &lt;- names(dat)
col_defs
#names(dat)
dat &lt;- data.set(dat,
               col.defs = col_defs,
               unit.defs = unit_defs
               )
str(dat)

eml_config(creator="Ivan Charles Hanigan &lt;ivan.hanigan@gmail.com&gt;")
dir()
oldwd &lt;- getwd()
setwd("myData")
eml_write(dat, file = "test_eml.xml", title = "test_eml")
setwd(oldwd)
</code></pre>

<p></p>


<h3>Use Morpho to tidy up the Results</h3>

<ul>
<li>The result can be imported to Morpho and then edited from there</li>
<li>or you can use a code editor like emacs or notepad++ to do bulk find-and-replace operations to fix up issues</li>
</ul>


<h3>Conclusions</h3>

<ul>
<li>Morpho failed with 200 plus variables</li>
<li>the R EML package succeeded to write the file</li>
<li>I needed to pay careful attention to the type of the variables in the data.frame before running the R EML functions</li>
</ul>


      <div class="clear"></div>
    </div>
    <p class="alt-font tight">
      Posted in&nbsp;
      
      <a href="/categories/data documentation" title="data documentation" rel="category tag">data documentation</a>
      
    </p>
    <!--
	<p class="comments-link">
      <a href='/2014/04/using-r-eml-to-input-large-numbers-of-variables-part-2/#disqus_thread'>Comments</a>
    </p>
	-->
    <p class="by-line">
      <span class="date full-date">
        <abbr class="published" title="2014-04-29 00:00:00 +1000">29 Apr 2014</abbr>
      </span>
    </p>
    <div class="clear"></div>
  </div>
  <div class="rule"><hr/></div>

  <div class="full">
    <h1 class="entry-title">
      <a href="/2014/04/tweaking-r-eml-package-outputs-with-morpho-and-failing-that-with-emacs/" title="Tweaking R Eml Package Outputs With Morpho And Failing That With Emacs" rel="bookmark">Tweaking R Eml Package Outputs With Morpho And Failing That With Emacs</a>
    </h1>
    <div class="entry-content full-content">
      <p>I realised that the work I did yesterday had an error in it.  I'd
created a list of unit.defs with one less than I needed.  So the
variable V100 was given the definition of NA!  I can fix this by open
that package in Morpho and go to the column and select it, then under
the Data menu, choose Edit Column Documentation.  There we can change
all the definitions.  Now I start thinking about changing the type
from count to ArealDensity, numberPerMeterSquared.  To change all
these new variables I don't want to go thru the GUI 95 times!  Change
the first one and then look at the EML</p>

<h4>EML Code:</h4>

<pre><code>&lt;attribute id="1398382425052"&gt;
  &lt;attributeName&gt;V99&lt;/attributeName&gt;
  &lt;attributeDefinition&gt;count stuff&lt;/attributeDefinition&gt;
  &lt;measurementScale&gt;
    &lt;ratio&gt;
      &lt;unit&gt;&lt;standardUnit&gt;number&lt;/standardUnit&gt;&lt;/unit&gt;
      &lt;numericDomain&gt;&lt;numberType&gt;real&lt;/numberType&gt;&lt;/numericDomain&gt;
    &lt;/ratio&gt;
  &lt;/measurementScale&gt;
&lt;/attribute&gt;
&lt;attribute id="1398382385863"&gt;
  &lt;attributeName&gt;V100&lt;/attributeName&gt;
  &lt;attributeDefinition&gt;A random variable&lt;/attributeDefinition&gt;
  &lt;measurementScale&gt;
    &lt;ratio&gt;
      &lt;unit&gt;&lt;standardUnit&gt;numberPerMeterSquared&lt;/standardUnit&gt;&lt;/unit&gt;
      &lt;numericDomain&gt;&lt;numberType&gt;real&lt;/numberType&gt;&lt;/numericDomain&gt;
    &lt;/ratio&gt;
  &lt;/measurementScale&gt;
&lt;/attribute&gt;
</code></pre>

<p></p>


<p>So this looks like I can do a find and replace in Emacs so go to the
"~/.morpho" database and make a copy of the appropriate EML (number was in the morpho saved) and rename it with the increment up one of the minor version. Open this and run the find and replace.</p>

<h4>Code:</h4>

<pre><code>&lt;standardUnit&gt;number&lt;
to
&lt;standardUnit&gt;numberPerMeterSquared&lt;
</code></pre>

<p></p>


<p>Which was a much quicker way to redefine all these.  Save to our Metacat Network and it shows up as I wanted it to.</p>

<p><img src="/images/morpho-wide3.png" alt="morpho-wide3.png" /></p>

<h2>Conclusions</h2>

<ul>
<li>Morpho and a code editor can be used in conjunction to edit EML quite well</li>
<li>I suspect edits to the EML directly with a code editor are pretty dangerous</li>
<li>For eg if you do the wrong change then that EML will likely not be valid and Morpho will complain.</li>
<li>But the advantage of quickly modifying things like 100 variables unit definitions rather than opening every one in the GUI seems to be a worthwhile risk to me.</li>
</ul>


      <div class="clear"></div>
    </div>
    <p class="alt-font tight">
      Posted in&nbsp;
      
      <a href="/categories/data documentation" title="data documentation" rel="category tag">data documentation</a>
      
    </p>
    <!--
	<p class="comments-link">
      <a href='/2014/04/tweaking-r-eml-package-outputs-with-morpho-and-failing-that-with-emacs/#disqus_thread'>Comments</a>
    </p>
	-->
    <p class="by-line">
      <span class="date full-date">
        <abbr class="published" title="2014-04-25 00:00:00 +1000">25 Apr 2014</abbr>
      </span>
    </p>
    <div class="clear"></div>
  </div>
  <div class="rule"><hr/></div>

  <div class="full">
    <h1 class="entry-title">
      <a href="/2014/04/using-reml-to-input-large-number-of-column-descriptions/" title="Using Reml To Input Large Number Of Column Descriptions" rel="bookmark">Using Reml To Input Large Number Of Column Descriptions</a>
    </h1>
    <div class="entry-content full-content">
      <p>We recently hit an issue when using morpho to enter metadata for a large number of variables (~200).  The GUI form for entering definitions and units steps through each variable, but at about 60 or 70 it starts to slow down.  By the time we got to 160 it was taking more than 5 minutes to change to the next variable.  To safegaurd against losing work, we kept hitting "save for later" but this got slower and apeared to freeze at the last minute...  Not sure if that last save worked at all.</p>

<p>So I;ve come back once more to the ROpenSci EML package which is looking like a really useful way to build metadata elements automatically, with Morpho being used to proved augmentation and finesse the documents.</p>

<p>First thing I tried was the constructed Column Definitions and Unit Definitions example from <a href="https://github.com/ropensci/EML">the README</a></p>

<h4>R Code:</h4>

<pre><code>#require(devtools)
#install_github("EML", "ROpenSci")
require(EML)

# The example from orig doco
dat = data.set(river = c("SAC",  "SAC",   "AM"),
               spp   = c("king",  "king", "ccho"),
               stg   = c("smolt", "parr", "smolt"),
               ct    = c(293L,    410L,    210L),
               col.defs = c("River site used for collection",
                            "Species common name",
                            "Life Stage",
                            "count of live fish in traps"),
               unit.defs = list(c(SAC = "The Sacramento River",
                                  AM = "The American River"),
                                c(king = "King Salmon",
                                  ccho = "Coho Salmon"),
                                c(parr = "third life stage",
                                  smolt = "fourth life stage"),
                                "number"))
str(dat)
eml_config(creator="Carl Boettiger &lt;cboettig@gmail.com&gt;")
eml_write(dat, file = "inst/doc/EML_example.xml")
# now you can import this to morpho and have a look
# note that for morpho 1.8 it wants to change the EML version from 2.1.1 to 2.1.0
# and it can't show the data yet
# so what we need to do is write this as a file to the morpho database
# save and close, note which number it assigned
dat &lt;- data.frame(dat)
morpho_db  &lt;- "~/.morpho/profiles/hanigan/data/hanigan/"
maxid  &lt;-  1+max(as.numeric(dir(morpho_db)))
filename &lt;- file.path(morpho_db,maxid)
# what is the number?
filename
write.csv(dat, filename, row.names =F, quote=F)
</code></pre>

<p></p>


<p>So now to finish what we need to add into the EML that morpho has created (22.1 in my case)  just needs the reference to the dataTable.</p>

<h4>EML Code:</h4>

<pre><code>...
&lt;/dataFormat&gt;
&lt;distribution scope="document"&gt; &lt;online&gt; &lt;url function="download"&gt;ecogrid://knb/hanigan.22.1&lt;/url&gt;
&lt;/online&gt;
&lt;access authSystem="knb" order="denyFirst"&gt;&lt;allow&gt;&lt;principal&gt;uid=datalibrarian,o=unaffiliated,dc=ecoinformatics,dc=org&lt;/principal&gt;
&lt;permission&gt;all&lt;/permission&gt;
&lt;/allow&gt;
&lt;allow&gt;&lt;principal&gt;uid=hanigan,o=unaffiliated,dc=ecoinformatics,dc=org&lt;/principal&gt;
&lt;permission&gt;read&lt;/permission&gt;
&lt;/allow&gt;
&lt;/access&gt;
&lt;/distribution&gt;
&lt;/physical&gt;
...
</code></pre>

<p></p>


<p>Which seems to have worked when we open it up again:</p>

<p><img src="/images/morpho-wide1.png" alt="moprho-wide1.png" /></p>

<p>So now let;s try a large nuber of variables:</p>

<h4>R Code:</h4>

<pre><code># add lots of cols
for(i in 5:100){
  dat[,i] &lt;-  sample(rnorm(100,1,2), 3)
}
str(dat)
##  $ V95  : num  1.5708 -0.0936 2.2324
##  $ V96  : num  1.79 5.4 1.62
##  $ V97  : num  -1.141 0.653 5.365
##  $ V98  : num  1.738 -1.046 -0.135
##  $ V99  : num  3.6 -0.738 -1.877
##   [list output truncated]

# firstly I make a liset of the unit definitions for the example
unit.defs &lt;- list(c(SAC = "The Sacramento River",
                   AM = "The American River"),
                 c(king = "King Salmon",
                   ccho = "Coho Salmon"),
                 c(parr = "third life stage",
                   smolt = "fourth life stage"))
# then I add to it the definition for the constructed variables
unit.defs[[3]]
for(i in 4:100){
  unit.defs[[i]] &lt;- "number"
}
unit.defs

# and this can be passed to the data.set constructor
dat &lt;- data.set(dat,
               col.defs = c("River site used for collection",
                            "Species common name",
                            "Life Stage",
                            "count of live fish in traps",
                           c(rep("count stuff", 95))),
                unit.defs = unit.defs
                )
str(dat)

eml_config(creator="Ivan Charles Hanigan &lt;ivan.hanigan@gmail.com&gt;")
eml_write(dat, file = "inst/doc/EML_example_wide.xml")
# import to morpho, save and close
# create the dataset for morphos database
dat &lt;- data.frame(dat)
morpho_db  &lt;- "~/.morpho/profiles/hanigan/data/hanigan/"
maxid  &lt;-  1+max(as.numeric(dir(morpho_db)))
filename &lt;- file.path(morpho_db,maxid)
# what is the number?
filename
write.csv(dat, filename, row.names =F, quote=F)
# now add this into the EML morpho has created (25.2 in my case)
</code></pre>

<p></p>


<p>Which now seems to have attached the variable defintions and dataTable adequately.</p>

<h2><img src="/images/morpho-wide2.png" alt="morpho-wide2.png" /></h2>

<p>name: using-reml-to-input-large-number-of-column-descriptions
layout: post
title: Using Reml To Input Large Number Of Column Descriptions
date: 2014-04-24
categories:</p>

<h2>- Data Documentation</h2>

<p>We recently hit an issue when using morpho to enter metadata for a large number of variables (~200).  The GUI form for entering definitions and units steps through each variable, but at about 60 or 70 it starts to slow down.  By the time we got to 160 it was taking more than 5 minutes to change to the next variable.  To safegaurd against losing work, we kept hitting "save for later" but this got slower and apeared to freeze at the last minute...  Not sure if that last save worked at all.</p>

<p>So I;ve come back once more to the ROpenSci EML package which is looking like a really useful way to build metadata elements automatically, with Morpho being used to proved augmentation and finesse the documents.</p>

<p>First thing I tried was the constructed Column Definitions and Unit Definitions example from <a href="https://github.com/ropensci/EML">the README</a></p>

<h4>R Code:</h4>

<pre><code>#require(devtools)
#install_github("EML", "ROpenSci")
require(EML)

# The example from orig doco
dat = data.set(river = c("SAC",  "SAC",   "AM"),
               spp   = c("king",  "king", "ccho"),
               stg   = c("smolt", "parr", "smolt"),
               ct    = c(293L,    410L,    210L),
               col.defs = c("River site used for collection",
                            "Species common name",
                            "Life Stage",
                            "count of live fish in traps"),
               unit.defs = list(c(SAC = "The Sacramento River",
                                  AM = "The American River"),
                                c(king = "King Salmon",
                                  ccho = "Coho Salmon"),
                                c(parr = "third life stage",
                                  smolt = "fourth life stage"),
                                "number"))
str(dat)
eml_config(creator="Carl Boettiger &lt;cboettig@gmail.com&gt;")
eml_write(dat, file = "inst/doc/EML_example.xml")
# now you can import this to morpho and have a look
# note that for morpho 1.8 it wants to change the EML version from 2.1.1 to 2.1.0
# and it can't show the data yet
# so what we need to do is write this as a file to the morpho database
# save and close, note which number it assigned
dat &lt;- data.frame(dat)
morpho_db  &lt;- "~/.morpho/profiles/hanigan/data/hanigan/"
maxid  &lt;-  1+max(as.numeric(dir(morpho_db)))
filename &lt;- file.path(morpho_db,maxid)
# what is the number?
filename
write.csv(dat, filename, row.names =F, quote=F)
</code></pre>

<p></p>


<p>So now to finish what we need to add into the EML that morpho has created (22.1 in my case)  just needs the reference to the dataTable.</p>

<h4>EML Code:</h4>

<pre><code>...
&lt;/dataFormat&gt;
&lt;distribution scope="document"&gt; &lt;online&gt; &lt;url function="download"&gt;ecogrid://knb/hanigan.22.1&lt;/url&gt;
&lt;/online&gt;
&lt;access authSystem="knb" order="denyFirst"&gt;&lt;allow&gt;&lt;principal&gt;uid=datalibrarian,o=unaffiliated,dc=ecoinformatics,dc=org&lt;/principal&gt;
&lt;permission&gt;all&lt;/permission&gt;
&lt;/allow&gt;
&lt;allow&gt;&lt;principal&gt;uid=hanigan,o=unaffiliated,dc=ecoinformatics,dc=org&lt;/principal&gt;
&lt;permission&gt;read&lt;/permission&gt;
&lt;/allow&gt;
&lt;/access&gt;
&lt;/distribution&gt;
&lt;/physical&gt;
...
</code></pre>

<p></p>


<p>Which seems to have worked when we open it up again:</p>

<p><img src="/images/morpho-wide1.png" alt="moprho-wide1.png" /></p>

<p>So now let;s try a large nuber of variables:</p>

<h4>R Code:</h4>

<pre><code># add lots of cols
for(i in 5:100){
  dat[,i] &lt;-  sample(rnorm(100,1,2), 3)
}
str(dat)
##  $ V95  : num  1.5708 -0.0936 2.2324
##  $ V96  : num  1.79 5.4 1.62
##  $ V97  : num  -1.141 0.653 5.365
##  $ V98  : num  1.738 -1.046 -0.135
##  $ V99  : num  3.6 -0.738 -1.877
##   [list output truncated]
               unit.defs = list(c(SAC = "The Sacramento River",
                                  AM = "The American River"),
                                c(king = "King Salmon",
                                  ccho = "Coho Salmon"),
                                c(parr = "third life stage",
                                  smolt = "fourth life stage"))
unit.defs[[3]]
for(i in 4:100){
unit.defs[[i]] &lt;- "number"
}
unit.defs
dat = data.set(dat,
               col.defs = c("River site used for collection",
                            "Species common name",
                            "Life Stage",
                            "count of live fish in traps",
c(rep("count stuff", 95))
                 ),
unit.defs = unit.defs

  )
str(dat)

eml_config(creator="Ivan Charles Hanigan &lt;ivan.hanigan@gmail.com&gt;")
eml_write(dat, file = "inst/doc/EML_example_wide.xml")
# import to morpho, save and close
dat &lt;- data.frame(dat)
morpho_db  &lt;- "~/.morpho/profiles/hanigan/data/hanigan/"
maxid  &lt;-  1+max(as.numeric(dir(morpho_db)))
filename &lt;- file.path(morpho_db,maxid)
# what is the number?
filename
write.csv(dat, filename, row.names =F, quote=F)
# now add this into the EML morpho has created (25.2 in my case)
</code></pre>

<p></p>


<p>Which now seems to have attached the variable defintions and dataTable adequately.</p>

<p><img src="/images/morpho-wide2.png" alt="morpho-wide2.png" /></p>

      <div class="clear"></div>
    </div>
    <p class="alt-font tight">
      Posted in&nbsp;
      
      <a href="/categories/data documentation" title="data documentation" rel="category tag">data documentation</a>
      
    </p>
    <!--
	<p class="comments-link">
      <a href='/2014/04/using-reml-to-input-large-number-of-column-descriptions/#disqus_thread'>Comments</a>
    </p>
	-->
    <p class="by-line">
      <span class="date full-date">
        <abbr class="published" title="2014-04-24 00:00:00 +1000">24 Apr 2014</abbr>
      </span>
    </p>
    <div class="clear"></div>
  </div>
  <div class="rule"><hr/></div>

  <div class="full">
    <h1 class="entry-title">
      <a href="/2014/04/linking-eml-packages-by-umbrella-project-info/" title="linking-eml-packages-by-umbrella-project-info" rel="bookmark">linking-eml-packages-by-umbrella-project-info</a>
    </h1>
    <div class="entry-content full-content">
      <p>In Eml the optional "project" module provides an overall description
of the larger-scale project or research context with which that
dataset is associated. For the examples in our work the "project" will
most often be an LTER (Longterm Ecological Research Network) site that
directed the research.  Accordingly, the "title" here consists of the
name of the LTER site. The "personnel" group contains the same
elements as "creator" and "contact", with the addition of a mandatory
"role" element, and it is used to identify the lead PI and/or
information manager on the site. Other optional elements in the
"project" module include "abstract", "funding",
"studyAreaDescription", and "designDescription", each of which can be
used to provide a richer textual description of the LTER site
responsible for the research project being documented.  If used, the
"abstract" includes basic information about the LTER site, such as its
general history and administration, while "studyAreaDescription" is
more of a physical description of the area where the site is
located. This description may also include the "coverage" module,
which is fully discussed on page XX of this handbook, or the
"citation" module, covered on page XX. The "funding" tag is textual
and self-explanatory, but "designDescription" is best used for a
description of the site’s database information and availability.</p>

<p>Morpho doesn't give all these options so you need to go to the EML file found in the "~/.morpho/..." directory and edit this with a text editor
I think the order of the tags here might make a difference so I always put thye "abstract" tag after the "/personnel" tag.  I also think you might need this "para" tag:</p>

<h4>Code:linking-eml-packages-by-umbrella-project-inf</h4>

<pre><code>&lt;abstract&gt; 
  &lt;para&gt;Prof McMichael set up this group to develop new methods of researching Environmental (especially Climate Change) and Health
  &lt;/para&gt;
&lt;/abstract&gt;
</code></pre>

<p></p>


<p>So this gives the overarching project a valid reference, but how to provde the links for interested readers to find out more?  First we can include a link to the project homepage from the eml/dataset/abstract node, but also we can provide URLs in a machine-readable way by inserting an "additionalLinks" node at the bottom of the EML:</p>

<h4>Code:linking-eml-packages-by-umbrella-project-info</h4>

<pre><code>&lt;additionalMetadata&gt;
  &lt;metadata&gt;
    &lt;additionalLinks&gt;
      &lt;url name="The name of the homepage"&gt;http://...&lt;/url&gt;
    &lt;/additionalLinks&gt;
  &lt;/metadata&gt;
&lt;/additionalMetadata&gt;
</code></pre>

      <div class="clear"></div>
    </div>
    <p class="alt-font tight">
      Posted in&nbsp;
      
      <a href="/categories/data documentation" title="data documentation" rel="category tag">data documentation</a>
      
    </p>
    <!--
	<p class="comments-link">
      <a href='/2014/04/linking-eml-packages-by-umbrella-project-info/#disqus_thread'>Comments</a>
    </p>
	-->
    <p class="by-line">
      <span class="date full-date">
        <abbr class="published" title="2014-04-21 00:00:00 +1000">21 Apr 2014</abbr>
      </span>
    </p>
    <div class="clear"></div>
  </div>
  <div class="rule"><hr/></div>


<div class="pagination">
  <span class="previous">
    
      
      <a href="/page4/" title="Previous Page">&laquo; Previous</a>
      
    
  </span>
  <span class="next">
    
    <a href="/page6/" title="Next Page">Next &raquo;</a>
    
  </span>
</div>
<script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid=SChamberlain"></script>

        </div>
        <div id="sidebar">
          <div id="carrington-subscribe" class="widget">
            <h2 class="widget-title">Subscribe</h2>
            <a class="feed alignright" title="RSS 2.0 feed for posts" rel="alternate" href="http://feeds.feedburner.com/Disentanglethings">
              <img src="/images/rss-button.gif" alt="latest posts" title="latest posts">
            </a>
          </div>
          <div id="carrington-about" class="widget">
            <div class="about">
              <h2 class="widget-title">About</h2>
              <p>I am a PhD Student at the Australian National University.</p>
              <a class="more" href="/about.html">more →</a>

            </div>
          </div>
<div class="sidebar">
  <div class="logos">
  
  <ul>
          
      <!-- Add in logos here -->
      <a href="http://scholar.google.com/citations?user=cGN1P0wAAAAJ&hl=en"><img src="images/GSIcon.jpg" height=22px width=22px/></a>&nbsp;&nbsp;&nbsp;&nbsp; 
          
      <!-- Add in logos here -->
      <a href="http://orcid.org/0000-0002-6360-6793"><img src="images/ORCID.png" height=22px width=22px/></a>&nbsp;&nbsp;&nbsp;&nbsp; 
          
      <!-- Add in logos here -->
      <a href="http://github.com/ivanhanigan"><img src="images/github.png" height=22px width=22px/></a>&nbsp;&nbsp;&nbsp;&nbsp; 
          
      <!-- Add in logos here -->
      <a href="mailto:ivan.hanigan@gmail.com"><img src="images/gmail.png" height=22px width=22px/></a>&nbsp;&nbsp;&nbsp;&nbsp; 
    
  </ul>
   
  </div>
</div>
          <!--
          	<p>
              <a href="http://ropensci.org/">
                <img src="/images/ropensci.png">
              </a>
        	</p>
			-->
			<!--
          <div id="carrington-link" class="widget">
          	<a href="http://ropensci.org/">
            <img src="/images/ropensci.png">
          </div>
          	-->
          
          <div id="primary-sidebar">
            <div class="widget">
              <h2 class="widget-title">Categories</h2>
              <ul>
<!-- <li> -->
<!--               <a class="workflow" href="/categories/workflow.html">workflow</a> -->
<!-- </li> -->
                
                <li><a href="/categories/overview">overview (7)</a></li>
                
                <li><a href="/categories/research methods">research methods (44)</a></li>
                
                <li><a href="/categories/disentangle things">disentangle things (4)</a></li>
                
                <li><a href="/categories/spatial">spatial (6)</a></li>
                
                <li><a href="/categories/extreme weather events">extreme weather events (11)</a></li>
                
                <li><a href="/categories/spatial dependence">spatial dependence (9)</a></li>
                
                <li><a href="/categories/data documentation">data documentation (32)</a></li>
                
                <li><a href="/categories/cloud building">cloud building (2)</a></li>
                
                <li><a href="/categories/e-collaboration">e-collaboration (1)</a></li>
                
                <li><a href="/categories/ecosocial tipping points">ecosocial tipping points (2)</a></li>
                
                <li><a href="/categories/disentangle">disentangle (6)</a></li>
                
                <li><a href="/categories/project management">project management (1)</a></li>
                
                <li><a href="/categories/morpho">morpho (1)</a></li>
                
                <li><a href="/categories/writing">writing (1)</a></li>
                
              </ul>
              <h2 class="widget-title">Recent Entries</h2>
              <ul>
                
                <li>
                  <a href="/2015/09/how-to-say-why-before-what/" title="how-to-say-why-before-what" rel="bookmark">how-to-say-why-before-what</a>
                </li>
                
                <li>
                  <a href="/2015/08/tracking-a-data-analysis-pipeline/" title="tracking-a-data-analysis-pipeline" rel="bookmark">tracking-a-data-analysis-pipeline</a>
                </li>
                
                <li>
                  <a href="/2015/07/climate-grids-and-thredds-server-experimenting-update/" title="Web Data, Climate Grids and THREDDS UPDATE" rel="bookmark">Web Data, Climate Grids and THREDDS UPDATE</a>
                </li>
                
                <li>
                  <a href="/2015/03/r-eml-to-mitigate-risks-in-morpho-metacat-data-publishing/" title="Using the R EML software to mitigate risks in Morpho and Metacat data publishing" rel="bookmark">Using the R EML software to mitigate risks in Morpho and Metacat data publishing</a>
                </li>
                
                <li>
                  <a href="/2015/03/tuftes-gantt-alternative-for-detail-within-context/" title="tuftes-gantt-alternative-for-detail-within-context" rel="bookmark">tuftes-gantt-alternative-for-detail-within-context</a>
                </li>
                
              </ul>
              <h2 class="widget-title">Entries grouped by Tags</h2>
              <ul>
                
                <li><a href="/tag/morpho">morpho (15)</a></li>
                
                <li><a href="/tag/R-eml">R-eml (3)</a></li>
                
                <li><a href="/tag/bugs">bugs (1)</a></li>
                
                <li><a href="/tag/software">software (3)</a></li>
                
              <div class="clear"></div>
              </ul>
            </div>
          </div>
          <!-- <div id="secondary-sidebar"> -->
          <!--   <div class="widget"> -->
          <!--     <h2 class="widget-title">Tags</h2> -->
          <!--     <ul> -->
          <!--        -->
          <!--       <li><a href="/tag/morpho">morpho (15)</a></li> -->
          <!--        -->
          <!--       <li><a href="/tag/R-eml">R-eml (3)</a></li> -->
          <!--        -->
          <!--       <li><a href="/tag/bugs">bugs (1)</a></li> -->
          <!--        -->
          <!--       <li><a href="/tag/software">software (3)</a></li> -->
          <!--        -->
          <!--     <div class="clear"></div> -->
          <!--     </ul> -->
          <!--   </div> -->
            <!--
            <div class="widget">
              <h2 class="widget-title">Archives</h2>
              <ul>
                
              </ul>
              <div class="clear"></div>
            </div>
            -->
          </div>
        </div>
      </div>
    </div>
    <div id="footer" class="section">
      <div class="wrapper">
        <a id="generator-link">
          Banner Artwork by Cindy Hales. Site powered by
          <a href="https://github.com/mojombo/jekyll" rel="generator">Jekyll</a>
          with
          <a href="http://carringtontheme.com" title="Carrington theme for WordPress">Carrington</a>
          theme.
      </div>
      <div id="developer-link">
      </div>
    </div>
    <!--
	<a href="http://github.com/SChamberlain"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://assets2.github.com/img/e6bef7a091f5f3138b8cd40bc3e114258dd68ddf?repo=&url=http%3A%2F%2Fs3.amazonaws.com%2Fgithub%2Fribbons%2Fforkme_right_red_aa0000.png&path=" alt="Fork me on GitHub"></a>
	-->
    <script type="text/javascript">
      var disqus_shortname = 'disentanglethings';

      (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
      }());
    </script>
    <script type="text/javascript">
      var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
      document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
      try {
        var pageTracker = _gat._getTracker("UA-28059658-1");
        pageTracker._trackPageview();
      } catch(err) {}
    </script>
  </body>
</html>
