<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Ivan Hanigan - Disentangle Things</title>
    <meta name="author" content="Ivan Hanigan" />
    <link rel="stylesheet" type="text/css" href="/stylesheets/screen.css">
    <link href="http://feeds.feedburner.com/Disentanglethings" rel="alternate" title="RSS" type="application/rss+xml" />
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script type="text/javascript" src="/javascripts/jquery.github_v2.js"></script>
  </head>

  <body>


    <div id="header" class="section">
      <div class="wrapper">
        <strong id="blog-title">
          <a href="/" rel="home">Disentangle Things by Ivan Hanigan</a>
        </strong>
        <p id="blog-description"></p>
        <div id="navigation">
          <ul class="nav clearfix">
            <li> <a href="/blog/">Notes</a></li> 
            <li><a href="/research/">About Open Notebooks</a></li>
            <li><a href="/projects/">Projects</a></li>
            <li><a href="/cv/">CV</a></li>
            <li><a href="http://lmgtfy.com/?q=site%3Aivanhanigan.github.io">Search this Site</a></li> 
          </ul>
        </div>
      </div>
    </div>
    <div id="main" class="section">
      <div class="wrapper">
        <div id="content">
          <h2>Welcome to my Open Notebook</h2>
            <!--<li class="first-child"><a href="/research.html">About My Notebook</a></li>-->
            <!--<li><a href="/donors.html">Donors</a></li>-->
            <!-- <li><a href="/projects.html">Data</a></li> -->
            <!--<li><a href="/publications.html">Journal Publications</a></li>-->
<p>This is an Open Notebook with <a href="https://en.wikipedia.org/wiki/Open_notebook_science" target="new">Selected Content - Delayed</a>. All content is licenced with CC-BY. Find out more <a href="/research.html">Here</a>.</p>

<p>  <img src="/images/ONS-SCD.png" alt="ONS-SCD.png" /></p>

          <!-- AddThis Button BEGIN -->
<!-- <div class="addthis_toolbox addthis_default_style "> -->
<!--   <a class="addthis_button_facebook_like" fb:like:layout="button_count"></a> -->
<!--   <a class="addthis_button_tweet"></a> -->
<!--   <a class="addthis_button_google_plusone" g:plusone:size="medium"></a> -->
<!--   <a class="addthis_counter addthis_pill_style"></a> -->
<!-- </div> -->
<!-- <script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid=SChamberlain"></script> -->
<!-- AddThis Button END -->

  <div class="full">
    <h1 class="entry-title">
      <a href="/2015/10/show-missingness-in-large-dataframes-v2/" title="Show missingness in large dataframes, version 2" rel="bookmark">Show missingness in large dataframes, version 2</a>
    </h1>
    <div class="entry-content full-content">
      <ul>
<li>UPDATE: the other day I blogged this but I needed to tweak things, so this is a re-post with extra</li>
<li>UPDATE 2: Today an R blogger has posted a new solution <a href="/2015/12/show-missingness-in-large-dataframes-with-ggplot-thanks-to-r-blogger">/2015/12/show-missingness-in-large-dataframes-with-ggplot-thanks-to-r-blogger</a></li>
</ul>


<h2>The old post</h2>

<ul>
<li>Sometime ago I saw this example of a method for assessing missing data in a large data frame <a href="http://flowingdata.com/2014/08/14/csv-fingerprint-spot-errors-in-your-data-at-a-glance/">http://flowingdata.com/2014/08/14/csv-fingerprint-spot-errors-in-your-data-at-a-glance/</a></li>
<li>I asked my colleague Grant about doing this in R and he whipped up the following code to generate such an image:</li>
</ul>


<p><img src="/images/bankstown_traffic_counts_full_listing_june_2014.svg" alt="/images/bankstown_traffic_counts_full_listing_june_2014.svg" /></p>

<h4>Code</h4>

<pre><code>misstable &lt;- function(atable){
 op &lt;- par(bg = "white")
 plot(c(0, 400), c(0, 1000), type = "n", xlab="", ylab="",
     main = "Missing Data Table")


 pmin=000
 pmax=400
 stre=pmax-pmin
 lnames=length(atable)
 cstep = (stre/lnames)
 for(titles in 1:lnames){
 text((titles-1) * cstep+pmin+cstep/2,1000,colnames(atable)[titles])
 }

 gmax=900
 gmin=0
 gstre=gmax-gmin
 rvec = as.vector(atable[ [ 1 ] ])
 dnames=length(rvec)
 step = gstre / dnames
 for(rows in 1:dnames){
 text(30,gmax - (rows-1)*step-step/2,rvec[rows])
 ymax=gmax - (rows-1)*step
 ymin=gmax - (rows)*step
 for(col in 2:lnames-1){
 if(atable[rows,col+1] == F){
 tcolor = "red"
 }
 if(atable[rows,col+1] == T){
 tcolor = "white"
 }
 rect((col) * (stre/lnames)+pmin, ymin, (col+1) * (stre/lnames)+pmin,
 ymax,col=tcolor,lty="blank")
 }
 }
}
</code></pre>

<p></p>


<ul>
<li>Now things to note are that the function expects the data to be TRUE if Not NA and  FALSE if is NA</li>
<li>so might need to massage things a bit first</li>
<li>here is the small test Grant supplied</li>
</ul>


<h4>Code</h4>

<pre><code>require(grDevices)

# Make a quick dataframe with true/false representing data availability
locs=c("Australia","India","New Zealand","Sri Lanka","Uruguay","Somalia")
f1=c(T,F,T,T,F,F)
f2=c(F,F,F,T,F,F)
f3=c(F,T,T,T,F,T)
atable=data.frame(locs,f1,f2,f3)
atable
#Draw the table.
misstable(atable)
</code></pre>

<p></p>


<ul>
<li>here is the one I worked on today</li>
</ul>


<h4>Code</h4>

<pre><code># having defined the input dir and input file tried reading the excel sheet (without head 3 rows)
#dat &lt;- readxl::read_excel(file.path(indir, infile), skip =3)
# got lots of warnings()
## 50: In read_xlsx_(path, sheet, col_names = col_names, col_types = col_types,  ... :
##   [1278, 4]: expecting date: got '[NULL]'
# I always worry about using excel connections so open in excel (in windows) 
# and save as to convert to CSV
dat &lt;- read.csv(file.path(indir, gsub(".xlsx", ".csv", infile)), skip =3, stringsAsFactor = F)
str(dat)
# 'data.frame':     1396 obs. of  167 variables:
# but most of the cols and a third of the rows are empty!
# check missings
dat2 &lt;- data.frame(id = 1:nrow(dat), dat)
str(dat2)
# first if they are empty strings
dat2[dat2 == ""] &lt;- NA
# now if NA
dat2[,2:ncol(dat2)] &lt;- !is.na(dat2[,2:ncol(dat2)])

# Truncate the hundreds of empty cols
str(dat2[,1:18])
tail(dat2[,1:18])
svg(file.path(outdir, gsub(".csv", ".svg", outfile))    )
misstable(dat2[,1:18])
dev.off()
browseURL(file.path(outdir, gsub(".csv", ".svg", outfile))    )

# cool, that is an effective way to look at the data
</code></pre>

      <div class="clear"></div>
    </div>
    <p class="alt-font tight">
      Posted in&nbsp;
      
      <a href="/categories/disentangle" title="disentangle" rel="category tag">disentangle</a>
      
      <a href="/categories/Exploratory Data Analysis" title="Exploratory Data Analysis" rel="category tag">Exploratory Data Analysis</a>
      
    </p>
    <!--
	<p class="comments-link">
      <a href='/2015/10/show-missingness-in-large-dataframes-v2/#disqus_thread'>Comments</a>
    </p>
	-->
    <p class="by-line">
      <span class="date full-date">
        <abbr class="published" title="2015-10-28 00:00:00 +1100">28 Oct 2015</abbr>
      </span>
    </p>
    <div class="clear"></div>
  </div>
  <div class="rule"><hr/></div>

  <div class="full">
    <h1 class="entry-title">
      <a href="/2015/10/show-missingness-in-large-dataframes/" title="show-missingness-in-large-dataframes" rel="bookmark">show-missingness-in-large-dataframes</a>
    </h1>
    <div class="entry-content full-content">
      <p>Sometime ago I saw this example of a method for assessing missing data in a large data frame <a href="http://flowingdata.com/2014/08/14/csv-fingerprint-spot-errors-in-your-data-at-a-glance/">http://flowingdata.com/2014/08/14/csv-fingerprint-spot-errors-in-your-data-at-a-glance/</a></p>

<p>I asked my colleague Grant about doing this in R and he whipped up the following code to generate such an image:</p>

<p><img src="/images/misstable.png" alt="/images/misstable.png" /></p>

<h4>Code</h4>

<pre><code>misstable &lt;- function(atable){
 op &lt;- par(bg = "white")
 plot(c(0, 400), c(0, 1000), type = "n", xlab="", ylab="",
     main = "Missing Data Table")


 pmin=000
 pmax=400
 stre=pmax-pmin
 lnames=length(atable)
 cstep = (stre/lnames)
 for(titles in 1:lnames){
 text((titles-1) * cstep+pmin+cstep/2,1000,colnames(atable)[titles])
 }

 gmax=900
 gmin=0
 gstre=gmax-gmin
 rvec = as.vector(atable[ [ 1 ] ])
 dnames=length(rvec)
 step = gstre / dnames
 for(rows in 1:dnames){
 text(30,gmax - (rows-1)*step-step/2,rvec[rows])
 ymax=gmax - (rows-1)*step
 ymin=gmax - (rows)*step
 for(col in 2:lnames-1){
 if(atable[rows,col+1] == F){
 tcolor = "red"
 }
 if(atable[rows,col+1] == T){
 tcolor = "white"
 }
 rect((col) * (stre/lnames)+pmin, ymin, (col+1) * (stre/lnames)+pmin,
 ymax,col=tcolor,lty="blank")
 }
 }
}

require(grDevices)

# Make a quick dataframe with true/false representing data availability
locs=c("Australia","India","New Zealand","Sri Lanka","Uruguay","Somalia")
f1=c(T,F,T,T,F,F)
f2=c(F,F,F,T,F,F)
f3=c(F,T,T,T,F,T)
atable=data.frame(locs,f1,f2,f3)
atable
#Draw the table.
misstable(atable)
</code></pre>

      <div class="clear"></div>
    </div>
    <p class="alt-font tight">
      Posted in&nbsp;
      
      <a href="/categories/disentangle" title="disentangle" rel="category tag">disentangle</a>
      
      <a href="/categories/Exploratory Data Analysis" title="Exploratory Data Analysis" rel="category tag">Exploratory Data Analysis</a>
      
    </p>
    <!--
	<p class="comments-link">
      <a href='/2015/10/show-missingness-in-large-dataframes/#disqus_thread'>Comments</a>
    </p>
	-->
    <p class="by-line">
      <span class="date full-date">
        <abbr class="published" title="2015-10-26 00:00:00 +1100">26 Oct 2015</abbr>
      </span>
    </p>
    <div class="clear"></div>
  </div>
  <div class="rule"><hr/></div>

  <div class="full">
    <h1 class="entry-title">
      <a href="/2015/10/sanitize-mendeley-references-in-r-markdown-reporting/" title="Sanitize mendeley references in r markdown reporting" rel="bookmark">Sanitize mendeley references in r markdown reporting</a>
    </h1>
    <div class="entry-content full-content">
      <p>A key challenge for Reproducible Research Reports in Rmarkdown remains adequate scholarly citation management; the machinery of scholarly citations and references.</p>

<p>The <code>knitcitations</code> R package does a great job of working with bibtex bibliography files, however the bibtex manager that I use is Mendeley and it has implemented some rules on the way it handles special characters that forces the bibtex references into a state with some 'escaped' elements that breaks their presentation via <code>knitcitations</code>.</p>

<p>This is a post from my open notebook that shows the workaround I am using for sanitizing the Mendeley escaped underscores in URLS.</p>

<p>Here is an example:</p>

<p>There is considerable public health impact from the effects on mental of drought <span class="citation">(<span>Sarathi Biswas</span> 2012)</span>. It is proposed that the best method to disentangle the multifactorial nature of this causal mechanism is the ‘five-capitals’ framework, indeed this method may even enable understanding the human carrying capacity of ecosystems <span class="citation">(McMichael &amp; Butler 2002)</span>.</p>




<p>McMichael, A.J. &amp; Butler, C.D. (2002). Global health trends: Evidence for and against sustainable progress. <em>International Union for the Scientific Study of Population Committee on Emerging Health Threats</em>. <a href="http://www.demogr.mpg.de/papers/workshops/020619{\_}paper25.pdf">http://www.demogr.mpg.de/papers/workshops/020619{\_}paper25.pdf</a> [21 Sep. 2003]</p>


<p><span>Sarathi Biswas</span>, P. (2012). Alcohol, drought lead to farmer’s suicide. <em>Daily News and Analysis</em>. <a href="http://www.dnaindia.com/pune/report{\_}alcohol-drought-lead-to-farmers-suicide{\_}1688976">http://www.dnaindia.com/pune/report{\_}alcohol-drought-lead-to-farmers-suicide{\_}1688976</a> [17 May 2012]</p>




<p></p>


<h2>See those pesky curly braces <code>{</code> and <code>}</code> around the underscores?</h2>

<h2>The fix</h2>

<p>The fix I am using is to sanitize each record where this is an issue as I build my document, so the mendeley version stays as-is, while the R version has been sanitized by removing the escape characters.</p>

<pre><code># read mendeley bibtex file
bib &lt;- read.bibtex("~/references/library.bib")
# ad hoc fix
for(bibkey in c("SarathiBiswas2012", "Mcmichael2002a")){
  bib[ [ bibkey ] ]$url &lt;- gsub("\\{\\\\_\\}","_", bib[ [ bibkey ] ]$url)
}
</code></pre>

<p>This is the result:</p>

<p>McMichael, A.J. &amp; Butler, C.D. (2002). Global health trends: Evidence for and against sustainable progress. <em>International Union for the Scientific Study of Population Committee on Emerging Health Threats</em>. <a href="http://www.demogr.mpg.de/papers/workshops/020619_paper25.pdf">http://www.demogr.mpg.de/papers/workshops/020619_paper25.pdf</a> [21 Sep. 2003]</p>


<p><span>Sarathi Biswas</span>, P. (2012). Alcohol, drought lead to farmer’s suicide. <em>Daily News and Analysis</em>. <a href="http://www.dnaindia.com/pune/report_alcohol-drought-lead-to-farmers-suicide_1688976">http://www.dnaindia.com/pune/report_alcohol-drought-lead-to-farmers-suicide_1688976</a> [17 May 2012]</p>




<p></p>


      <div class="clear"></div>
    </div>
    <p class="alt-font tight">
      Posted in&nbsp;
      
      <a href="/categories/disentangle" title="disentangle" rel="category tag">disentangle</a>
      
      <a href="/categories/Reproducible Research Reports" title="Reproducible Research Reports" rel="category tag">Reproducible Research Reports</a>
      
    </p>
    <!--
	<p class="comments-link">
      <a href='/2015/10/sanitize-mendeley-references-in-r-markdown-reporting/#disqus_thread'>Comments</a>
    </p>
	-->
    <p class="by-line">
      <span class="date full-date">
        <abbr class="published" title="2015-10-24 00:00:00 +1100">24 Oct 2015</abbr>
      </span>
    </p>
    <div class="clear"></div>
  </div>
  <div class="rule"><hr/></div>

  <div class="full">
    <h1 class="entry-title">
      <a href="/2015/10/keeping-an-electronic-lab-notebook-for-computational-statistics-projects/" title="Keeping an electronic lab notebook for computational statistics projects" rel="bookmark">Keeping an electronic lab notebook for computational statistics projects</a>
    </h1>
    <div class="entry-content full-content">
      <ul>
<li>In my previous post on this topic <a href="http://ivanhanigan.github.io/2015/10/how-to-effectively-implement-electronic-lab-notebooks-in-epidemiology/">http://ivanhanigan.github.io/2015/10/how-to-effectively-implement-electronic-lab-notebooks-in-epidemiology/</a> I summarised some recommendations for electronic lab notebooks</li>
<li>I've collated from a variety of sources for managing computational statistics projects in a reproducible research Pipelines</li>
<li>One thing I found while reading the literature around this topic is that the concepts are difficult to really grasp until I see them being used</li>
<li>The example worklog from Scott Long was a good insight into his method, that I really got more out of the figure below than from descriptions of the concept</li>
<li>screen shot taken from Long, S. (2012). Principles of Workflow in Data Analysis. Retrieved from <a href="http://www.indiana.edu/~wim/docs/2012-long-slides.pdf">http://www.indiana.edu/~wim/docs/2012-long-slides.pdf</a> (accessed 2015-10-23).</li>
</ul>


<p><img src="/images/worklog-long.png" alt="/images/worklog-long.png" /></p>

<p></p>


<ul>
<li>I added a red box around an important aspect of this example, the communication of gory details, that are often difficult to track if not using a notebook to log our work</li>
<li>ARGH! indeed.</li>
</ul>


<h2>Replication from Noble's description</h2>

<ul>
<li>That looks good, but I also really liked the description in Noble's paper where scripts that do computations are linked to log entries</li>
<li>This was something that I felt I wanted to see in action</li>
<li>Without an example online, I had to have a go at creating one from the instructions</li>
<li>I also had to make some modifications to the method because I want to have this set up work in a multidisciplinary team with some users on windows and others on linux, sharing the project on a network folder</li>
</ul>


<h2>My paraphrasing of Noble's description</h2>

<ul>
<li>Worklog: this is the main file, like a 'lab notebook' for the analyst to track their work.  This  document resides in the root of the project directory and records your progress in detail. Entries in the notebook should be dated, and they should be relatively verbose, with links or embedded images or tables displaying the results of the experiments that you performed. In addition to describing precisely what you did, the notebook should record your observations, conclusions, and ideas for future work</li>
<li>For group work, this can also contain a 'working' folder for each person to store their messy day-to-day files that we don't want to clutter up the main folder (eg 'working_ivan')</li>
</ul>


<p>Conventions I used for writing the worklog entries are:</p>

<ul>
<li>Names follow this structure [**] [date in ISO 8601 YYYY-MM-DD] [meeting/notes/results] [with/from UserName] [Re: topic shortname]</li>
<li>'meetings' are for both agenda preparation and also notes of discussion</li>
<li>'notes' are such things as emailed information or ad hoc Discovery</li>
<li>'results' are entries related to a section of the 'results' folder. That is, this kind of entry is in parallel to the results entry (see below), however the log contains a prose description of the experiment, whereas the results folder contains scripts etc of all the gory details.</li>
</ul>


<h2>Tests</h2>

<ul>
<li>I use Emacs on linux for most of my work but I need to share with windows users so tested out keeping the log in a MS word doc.  This got corrupted quickly I think because I edited in Libre office.</li>
<li>I decided to try and just use a plain text format</li>
<li>text files created in Ubuntu are so difficult to understand (read) when opened in Windows' Notepad. No matter how many lines have been used, all the lines appear in the same one line.
To set the buffer coding to DOS style issue:</li>
</ul>


<p><code>M-x set-buffer-file-coding-system utf-8-dos</code></p>

<h3>a couple of examples</h3>

<ul>
<li>As this is a plain text document opening it in emacs will not automatically render it in the Orgmode fashion</li>
<li>To achieve this the command is <code>M-x org-mode</code> and the file looks like below</li>
</ul>


<p><img src="/images/worklog-ivan1.png" alt="/images/worklog-ivan1.png" /></p>

<p></p>


<ul>
<li>From here I can keep adding new entries at the bottom, and have a section for URGENT ACTION a the top</li>
<li>Orgmode can expand the entries by moving to that line and hitting TAB, or use the command <code>C-u C-u C-u TAB</code> to expand all branches</li>
</ul>


<p><img src="/images/worklog-ivan2.png" alt="/images/worklog-ivan2.png" /></p>

<p></p>


<h2>the 'Experiment Results' level is about work you might do on a single day, or over a week or two</h2>

<ul>
<li>Each results subfolder would have workflow scripts that does the work</li>
<li>At this level each 'experiment' is written up in chronological order</li>
<li>It is recommended to store every command used while performing the experiment preferably as an executable script that carries out the entire experiment automatically</li>
<li>you should end up with a file that is parallel to the worklog entry</li>
<li>The worklog contains a prose description of the experiment, whereas the driver script contains all the gory details</li>
<li>this is the level I usually think of the distribution side of things</li>
<li>You may want to pack up the results from one of these folders and email it to the collaborators, or decide on the one set of tables and figures to write into the manuscript for submission to a journal</li>
<li>If this is accepted for publication, this is the one combined package of 'analytical data and code' that I would consider putting up online as supporting information for the paper.</li>
</ul>


<h3>Example</h3>

<ul>
<li>I followed Noble's advice to create a driver script to set up the folder structure:</li>
<li>it is in my Github R package <code>disentangle</code></li>
</ul>


<pre><code>&gt; dir.create("exposures_blending")
&gt; setwd("exposures_blending")
&gt; disentangle::AdminTemplate()
[1] TRUE
&gt; dir.create("results")
&gt; setwd("results")
&gt; makeProject::makeProject("2015-10-23-preliminary-modelling")
Creating Directories ...
Creating Code Files ...
Complete ...
&gt; 
</code></pre>

<p>This populates the folders as shown below</p>

<p><img src="/images/worklog-ivan3.png" alt="/images/worklog-ivan3.png" /></p>

<p></p>


<h2>Conclusions</h2>

<ul>
<li>I feel pretty happy with this as a replication of Noble's method</li>
<li>My colleagues can look at my work and see a high level log that links to the gory details of day to day life in the trenches</li>
<li>The only downside I can see at the moment is that my colleagues on windows will see a text file that is pretty dense, and will not be as easy to navigate as a word document (or emacs org file)</li>
<li>Perhaps notepad++ can be used instead.  On my windows machine I did a quick experiment with NPP and found that under the Language menu > Define your language there is a method to define code folding with ** as the opening.  Just need to define a closing tag.  I experimented with '---' which might be good, but ultimately I don't think my colleagues are going to want to do this on their machines.</li>
</ul>


      <div class="clear"></div>
    </div>
    <p class="alt-font tight">
      Posted in&nbsp;
      
      <a href="/categories/disentangle" title="disentangle" rel="category tag">disentangle</a>
      
      <a href="/categories/Workflow tools" title="Workflow tools" rel="category tag">Workflow tools</a>
      
    </p>
    <!--
	<p class="comments-link">
      <a href='/2015/10/keeping-an-electronic-lab-notebook-for-computational-statistics-projects/#disqus_thread'>Comments</a>
    </p>
	-->
    <p class="by-line">
      <span class="date full-date">
        <abbr class="published" title="2015-10-23 00:00:00 +1100">23 Oct 2015</abbr>
      </span>
    </p>
    <div class="clear"></div>
  </div>
  <div class="rule"><hr/></div>

  <div class="full">
    <h1 class="entry-title">
      <a href="/2015/10/reproducible-research-pipelines-improve-description-of-method-steps/" title="Reproducible research pipelines improve description of method steps" rel="bookmark">Reproducible research pipelines improve description of method steps</a>
    </h1>
    <div class="entry-content full-content">
      <p>Adequately documenting the methods and results of data analysis helps
safeguard against errors of execution and
interpretation. It is proposed that
reproducible research pipelines address the problem of
adequate documentation of data analysis.</p>

<p>This is because they make it easy to
check the methods. Assumptions are easy to challenge and results
verified in new analyses. Reproducible research pipelines extend
traditional research.  They do this by encoding the steps in a
computer ‘scripting’ language and distributing the data and code with
publications.  Traditional research moves through the steps of
hypothesis and design, measured data, analytic data, computational
results (for figures, tables and numerical results), and reports (text
and formatted manuscript).</p>

<h2>Fundamental components of a reproducible research pipeline</h2>

<p>The basic components of a pipeline are:</p>

<ul>
<li>Data Management Plan and Data Inventory</li>
<li>Method steps</li>
<li>Code</li>
<li>Data storage</li>
<li>Reports</li>
<li>Distribution.</li>
</ul>


<h3>Method Steps</h3>

<p>The method step is the key atomic unit of a scientific pipeline.  It consists of inputs, outputs and a rationale for why the step is taken.</p>

<p>A simple way to keep track of the steps, inputs and outputs is shown in the Table below.</p>

<pre><code>library(stringr)
steps &lt;- read.csv(textConnection('
CLUSTER ,  STEP  , INPUTS                   , OUTPUTS                   
A  ,  Step1      , "Input 1, Input 2"       , "Output 1"                 
A  ,  Step2      ,  Input 3                  , Output 2                   
B  ,  Step3      , "Output 1, Output 2"      , Output 3                  
'), stringsAsFactors = F, strip.white = T)
</code></pre>

<p></p>


<p>The steps and data listed in the Table above can be visualised.
To achieve this an R function was written as part of this PhD project and is distributed in my own R package available on Github <a href="https://github.com/ivanhanigan/disentangle">https://github.com/ivanhanigan/disentangle</a>.
This is the <code>newnode</code> function.  The function returns a string of text
written in the <code>dot</code> language which can be rendered in R using the
<code>DiagrammeR</code> package, or the standalone <code>graphviz</code> package.   This creates the graph of this pipeline shown in Figure below.  Note that a new field was added for Descriptions as these are highly recommended.</p>

<pre><code>library(disentangle); library(stringr)
nodes &lt;- newnode(indat = steps,   names_col = "STEP", in_col = "INPUTS",
  out_col = "OUTPUTS", 
  nchar_to_snip = 40)
sink("fig-basic.dot");
cat(nodes);
sink()
# or DiagrammeR::grViz(nodes)
system("dot -Tpdf fig-basic.dot -o fig-basic.pdf")
</code></pre>

<p></p>


<p><img src="/images/fig-basic.png" alt="/images/fig-basic.png" /></p>

      <div class="clear"></div>
    </div>
    <p class="alt-font tight">
      Posted in&nbsp;
      
      <a href="/categories/disentangle" title="disentangle" rel="category tag">disentangle</a>
      
      <a href="/categories/Workflow tools" title="Workflow tools" rel="category tag">Workflow tools</a>
      
    </p>
    <!--
	<p class="comments-link">
      <a href='/2015/10/reproducible-research-pipelines-improve-description-of-method-steps/#disqus_thread'>Comments</a>
    </p>
	-->
    <p class="by-line">
      <span class="date full-date">
        <abbr class="published" title="2015-10-18 00:00:00 +1100">18 Oct 2015</abbr>
      </span>
    </p>
    <div class="clear"></div>
  </div>
  <div class="rule"><hr/></div>


<div class="pagination">
  <span class="previous">
    
      
      <a href="/page7/" title="Previous Page">&laquo; Previous</a>
      
    
  </span>
  <span class="next">
    
    <a href="/page9/" title="Next Page">Next &raquo;</a>
    
  </span>
</div>
<!-- <script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid=SChamberlain"></script> -->

        </div>
        <div id="sidebar">
          <div id="carrington-subscribe" class="widget">
            <h2 class="widget-title">Subscribe</h2>
            <a class="feed alignright" title="RSS 2.0 feed for posts" rel="alternate" href="http://feeds.feedburner.com/Disentanglethings">
              <img src="/images/rss-button.gif" alt="latest posts" title="latest posts">
            </a>
          </div>
          <div id="carrington-about" class="widget">
            <div class="about">
              <h2 class="widget-title">About</h2>
              <p>I am a Human Ecologist, Epidemiologist and Data Scientist at Canberra University.</p>
              <a class="more" href="/about.html">more →</a>

            </div>
          </div>
<div class="sidebar">
  <div class="logos">
  
  <ul>
          
      <!-- Add in logos here -->
      <a href="http://scholar.google.com/citations?user=cGN1P0wAAAAJ&hl=en"><img src="/images/GSIcon.jpg" height=22px width=22px/></a>&nbsp;&nbsp;&nbsp;&nbsp; 
          
      <!-- Add in logos here -->
      <a href="http://orcid.org/0000-0002-6360-6793"><img src="/images/ORCID.png" height=22px width=22px/></a>&nbsp;&nbsp;&nbsp;&nbsp; 
          
      <!-- Add in logos here -->
      <a href="http://github.com/ivanhanigan"><img src="/images/github.png" height=22px width=22px/></a>&nbsp;&nbsp;&nbsp;&nbsp; 
          
      <!-- Add in logos here -->
      <a href="mailto:ivan.hanigan@gmail.com"><img src="/images/gmail.png" height=22px width=22px/></a>&nbsp;&nbsp;&nbsp;&nbsp; 
          
      <!-- Add in logos here -->
      <a href="https://twitter.com/ivanhanigan"><img src="/images/twitter.png" height=22px width=22px/></a>&nbsp;&nbsp;&nbsp;&nbsp; 
    
  </ul>
   
  </div>
</div>
          <!--
          	<p>
              <a href="http://ropensci.org/">
                <img src="/images/ropensci.png">
              </a>
        	</p>
			-->
			<!--
          <div id="carrington-link" class="widget">
          	<a href="http://ropensci.org/">
            <img src="/images/ropensci.png">
          </div>
          	-->
          
          <div id="primary-sidebar">
            <div class="widget">
              <h2 class="widget-title">Recent Entries</h2>
              <ul>
                
                <li>
                  <a href="/2017/11/the-impact-of-scale/" title="The impact of scale on associations between disadvantage and hospitalization for heart diseases" rel="bookmark">The impact of scale on associations between disadvantage and hospitalization for heart diseases</a>
                </li>
                
                <li>
                  <a href="/2017/11/new-paper-on-neighbourhood-level-air-pollution-for-health-research/" title="New paper on neighbourhood level air pollution for health research" rel="bookmark">New paper on neighbourhood level air pollution for health research</a>
                </li>
                
                <li>
                  <a href="/2017/01/reproducible-ecosystem-risk-assessment-as-virtual-desktop-case-study/" title="Reproducible ecosystem risk assessment as virtual desktop case study" rel="bookmark">Reproducible ecosystem risk assessment as virtual desktop case study</a>
                </li>
                
                <li>
                  <a href="/2016/12/one-health-ecohealth-conference-melbourne-dec-2016/" title="One Health Ecohealth Conference Melbourne Dec 2016" rel="bookmark">One Health Ecohealth Conference Melbourne Dec 2016</a>
                </li>
                
                <li>
                  <a href="/2016/09/update-ripping-data-from-georeferenced-images-with-qgis/" title="UPDATE re Ripping data from georeferenced images with QGIS" rel="bookmark">UPDATE re Ripping data from georeferenced images with QGIS</a>
                </li>
                
              </ul>
              <h2 class="widget-title">Categories</h2>
              <ul>
<!-- <li> -->
<!--               <a class="workflow" href="/categories/workflow.html">workflow</a> -->
<!-- </li> -->
                
                <li><a href="/categories/overview">overview (7)</a></li>
                
                <li><a href="/categories/research methods">research methods (42)</a></li>
                
                <li><a href="/categories/disentangle things">disentangle things (4)</a></li>
                
                <li><a href="/categories/spatial">spatial (9)</a></li>
                
                <li><a href="/categories/extreme weather events">extreme weather events (8)</a></li>
                
                <li><a href="/categories/spatial dependence">spatial dependence (10)</a></li>
                
                <li><a href="/categories/Data Documentation">Data Documentation (31)</a></li>
                
                <li><a href="/categories/awap grids">awap grids (3)</a></li>
                
                <li><a href="/categories/climatic and agricultural drought">climatic and agricultural drought (3)</a></li>
                
                <li><a href="/categories/cloud building">cloud building (3)</a></li>
                
                <li><a href="/categories/disentangle">disentangle (49)</a></li>
                
                <li><a href="/categories/Project Management">Project Management (2)</a></li>
                
                <li><a href="/categories/e-collaboration">e-collaboration (1)</a></li>
                
                <li><a href="/categories/ecosocial tipping points">ecosocial tipping points (2)</a></li>
                
                <li><a href="/categories/Drought">Drought (1)</a></li>
                
                <li><a href="/categories/project management">project management (1)</a></li>
                
                <li><a href="/categories/morpho">morpho (1)</a></li>
                
                <li><a href="/categories/data documentation">data documentation (1)</a></li>
                
                <li><a href="/categories/reproducible research reports">reproducible research reports (2)</a></li>
                
                <li><a href="/categories/Data Management">Data Management (2)</a></li>
                
                <li><a href="/categories/Reproducible Research Reports">Reproducible Research Reports (2)</a></li>
                
                <li><a href="/categories/Data Operation">Data Operation (2)</a></li>
                
                <li><a href="/categories/Workflow tools">Workflow tools (3)</a></li>
                
                <li><a href="/categories/Exploratory Data Analysis">Exploratory Data Analysis (2)</a></li>
                
                <li><a href="/categories/statistical modelling">statistical modelling (2)</a></li>
                
                <li><a href="/categories/blog home">blog home (1)</a></li>
                
                <li><a href="/categories/data management">data management (1)</a></li>
                
                <li><a href="/categories/swish">swish (3)</a></li>
                
                <li><a href="/categories/reproducible research pipelines">reproducible research pipelines (2)</a></li>
                
                <li><a href="/categories/reproducible research">reproducible research (2)</a></li>
                
                <li><a href="/categories/writing">writing (1)</a></li>
                
                <li><a href="/categories/climate data">climate data (1)</a></li>
                
                <li><a href="/categories/exploratory data analysis">exploratory data analysis (2)</a></li>
                
                <li><a href="/categories/bibliometrics and literature reviewing">bibliometrics and literature reviewing (1)</a></li>
                
                <li><a href="/categories/drought awap grids">drought awap grids (1)</a></li>
                
                <li><a href="/categories/drought">drought (2)</a></li>
                
                <li><a href="/categories/data operation">data operation (2)</a></li>
                
                <li><a href="/categories/training">training (1)</a></li>
                
              </ul>
              <h2 class="widget-title">Entries grouped by Tags</h2>
              <ul>
                
                <li><a href="/tag/morpho">morpho (15)</a></li>
                
                <li><a href="/tag/project management">project management (3)</a></li>
                
                <li><a href="/tag/Data Management System">Data Management System (3)</a></li>
                
                <li><a href="/tag/R-eml">R-eml (3)</a></li>
                
                <li><a href="/tag/bugs">bugs (1)</a></li>
                
                <li><a href="/tag/software">software (3)</a></li>
                
                <li><a href="/tag/writing">writing (2)</a></li>
                
                <li><a href="/tag/spatial">spatial (1)</a></li>
                
                <li><a href="/tag/diagrams">diagrams (3)</a></li>
                
                <li><a href="/tag/blogging">blogging (2)</a></li>
                
                <li><a href="/tag/metadata">metadata (1)</a></li>
                
                <li><a href="/tag/R">R (1)</a></li>
                
                <li><a href="/tag/Reproducible Research Reports">Reproducible Research Reports (2)</a></li>
                
                <li><a href="/tag/Data Management">Data Management (3)</a></li>
                
                <li><a href="/tag/Exploratory Data Analysis">Exploratory Data Analysis (1)</a></li>
                
                <li><a href="/tag/bibliometrics and literature reviewing">bibliometrics and literature reviewing (2)</a></li>
                
                <li><a href="/tag/workflow tools">workflow tools (1)</a></li>
                
                <li><a href="/tag/data management">data management (1)</a></li>
                
                <li><a href="/tag/exploratory data analysis">exploratory data analysis (1)</a></li>
                
              <div class="clear"></div>
              </ul>
            </div>
          </div>
          <!-- <div id="secondary-sidebar"> -->
          <!--   <div class="widget"> -->
          <!--     <h2 class="widget-title">Tags</h2> -->
          <!--     <ul> -->
          <!--        -->
          <!--       <li><a href="/tag/morpho">morpho (15)</a></li> -->
          <!--        -->
          <!--       <li><a href="/tag/project management">project management (3)</a></li> -->
          <!--        -->
          <!--       <li><a href="/tag/Data Management System">Data Management System (3)</a></li> -->
          <!--        -->
          <!--       <li><a href="/tag/R-eml">R-eml (3)</a></li> -->
          <!--        -->
          <!--       <li><a href="/tag/bugs">bugs (1)</a></li> -->
          <!--        -->
          <!--       <li><a href="/tag/software">software (3)</a></li> -->
          <!--        -->
          <!--       <li><a href="/tag/writing">writing (2)</a></li> -->
          <!--        -->
          <!--       <li><a href="/tag/spatial">spatial (1)</a></li> -->
          <!--        -->
          <!--       <li><a href="/tag/diagrams">diagrams (3)</a></li> -->
          <!--        -->
          <!--       <li><a href="/tag/blogging">blogging (2)</a></li> -->
          <!--        -->
          <!--       <li><a href="/tag/metadata">metadata (1)</a></li> -->
          <!--        -->
          <!--       <li><a href="/tag/R">R (1)</a></li> -->
          <!--        -->
          <!--       <li><a href="/tag/Reproducible Research Reports">Reproducible Research Reports (2)</a></li> -->
          <!--        -->
          <!--       <li><a href="/tag/Data Management">Data Management (3)</a></li> -->
          <!--        -->
          <!--       <li><a href="/tag/Exploratory Data Analysis">Exploratory Data Analysis (1)</a></li> -->
          <!--        -->
          <!--       <li><a href="/tag/bibliometrics and literature reviewing">bibliometrics and literature reviewing (2)</a></li> -->
          <!--        -->
          <!--       <li><a href="/tag/workflow tools">workflow tools (1)</a></li> -->
          <!--        -->
          <!--       <li><a href="/tag/data management">data management (1)</a></li> -->
          <!--        -->
          <!--       <li><a href="/tag/exploratory data analysis">exploratory data analysis (1)</a></li> -->
          <!--        -->
          <!--     <div class="clear"></div> -->
          <!--     </ul> -->
          <!--   </div> -->
            <!--
            <div class="widget">
              <h2 class="widget-title">Archives</h2>
              <ul>
                
              </ul>
              <div class="clear"></div>
            </div>
            -->
          </div>
        </div>
      </div>
    </div>
    <div id="footer" class="section">
      <div class="wrapper">
        <a id="generator-link">
          Banner Artwork by Cindy Hales. Site powered by
          <a href="https://github.com/mojombo/jekyll" rel="generator">Jekyll</a>
          with
          <a href="http://carringtontheme.com" title="Carrington theme for WordPress">Carrington</a>
          theme.
      </div>
      <div id="developer-link">
      </div>
    </div>
    <!--
	<a href="http://github.com/SChamberlain"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://assets2.github.com/img/e6bef7a091f5f3138b8cd40bc3e114258dd68ddf?repo=&url=http%3A%2F%2Fs3.amazonaws.com%2Fgithub%2Fribbons%2Fforkme_right_red_aa0000.png&path=" alt="Fork me on GitHub"></a>
	-->
    <script type="text/javascript">
      var disqus_shortname = 'disentanglethings';

      (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
      }());
    </script>
    <script type="text/javascript">
      var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
      document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
      try {
        var pageTracker = _gat._getTracker("UA-28059658-1");
        pageTracker._trackPageview();
      } catch(err) {}
    </script>
  </body>
</html>
